<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="转载自YiSin的blog 前置条件123456789101112131415161718192021222324252627282930&#x2F;* 需要包含的头文件 *&#x2F; #include &lt;cmath &gt;  &#x2F;* 常用的常量定义 *&#x2F; const double    INF   &#x3D; 1E200const double    EP    &#x3D; 1E-10 const int       MA">
<meta property="og:type" content="article">
<meta property="og:title" content="C++几何算法大全">
<meta property="og:url" content="http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/index.html">
<meta property="og:site_name" content="Radica Blogs">
<meta property="og:description" content="转载自YiSin的blog 前置条件123456789101112131415161718192021222324252627282930&#x2F;* 需要包含的头文件 *&#x2F; #include &lt;cmath &gt;  &#x2F;* 常用的常量定义 *&#x2F; const double    INF   &#x3D; 1E200const double    EP    &#x3D; 1E-10 const int       MA">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-05-23T08:42:13.000Z">
<meta property="article:modified_time" content="2022-05-24T14:35:13.915Z">
<meta property="article:author" content="Radica">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>C++几何算法大全</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.0.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" aria-label="Next post" href="/2022/05/17/Redhawk%E5%AE%89%E8%A3%85%E5%8F%8ALinux%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&text=C++几何算法大全"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&is_video=false&description=C++几何算法大全"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=C++几何算法大全&body=Check out this article: http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&name=C++几何算法大全&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&t=C++几何算法大全"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">前置条件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">2.</span> <span class="toc-text">目录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E7%82%B9%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.1.</span> <span class="toc-text">一.点的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B9%B3%E9%9D%A2%E4%B8%8A%E4%B8%A4%E7%82%B9%E4%B9%8B%E9%97%B4%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.平面上两点之间距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A4%E6%96%AD%E4%B8%A4%E7%82%B9%E6%98%AF%E5%90%A6%E9%87%8D%E5%90%88"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.判断两点是否重合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%9F%A2%E9%87%8F%E5%8F%89%E4%B9%98"><span class="toc-number">2.1.3.</span> <span class="toc-text">3.矢量叉乘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%9F%A2%E9%87%8F%E7%82%B9%E4%B9%98"><span class="toc-number">2.1.4.</span> <span class="toc-text">4.矢量点乘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%A4%E6%96%AD%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E7%BA%BF%E6%AE%B5%E4%B8%8A"><span class="toc-number">2.1.5.</span> <span class="toc-text">5.判断点是否在线段上</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%B1%82%E4%B8%80%E7%82%B9%E9%A5%B6%E6%9F%90%E7%82%B9%E6%97%8B%E8%BD%AC%E5%90%8E%E7%9A%84%E5%9D%90%E6%A0%87"><span class="toc-number">2.1.6.</span> <span class="toc-text">6.求一点饶某点旋转后的坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%B1%82%E7%9F%A2%E9%87%8F%E5%A4%B9%E8%A7%92"><span class="toc-number">2.1.7.</span> <span class="toc-text">7.求矢量夹角</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E7%BA%BF%E6%AE%B5%E5%8F%8A%E7%9B%B4%E7%BA%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.2.</span> <span class="toc-text">二.线段及直线的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%82%B9%E4%B8%8E%E7%BA%BF%E6%AE%B5%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.2.1.</span> <span class="toc-text">1.点与线段的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B1%82%E7%82%B9%E5%88%B0%E7%BA%BF%E6%AE%B5%E6%89%80%E5%9C%A8%E7%9B%B4%E7%BA%BF%E5%9E%82%E7%BA%BF%E7%9A%84%E5%9E%82%E8%B6%B3"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.求点到线段所在直线垂线的垂足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%82%B9%E5%88%B0%E7%BA%BF%E6%AE%B5%E7%9A%84%E6%9C%80%E8%BF%91%E7%82%B9"><span class="toc-number">2.2.3.</span> <span class="toc-text">3.点到线段的最近点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%82%B9%E5%88%B0%E7%BA%BF%E6%AE%B5%E6%89%80%E5%9C%A8%E7%9B%B4%E7%BA%BF%E7%9A%84%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.2.4.</span> <span class="toc-text">4.点到线段所在直线的距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%82%B9%E5%88%B0%E6%8A%98%E7%BA%BF%E9%9B%86%E7%9A%84%E6%9C%80%E8%BF%91%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.2.5.</span> <span class="toc-text">5.点到折线集的最近距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%A4%E6%96%AD%E5%9C%86%E6%98%AF%E5%90%A6%E5%9C%A8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.2.6.</span> <span class="toc-text">6.判断圆是否在多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%B1%82%E7%9F%A2%E9%87%8F%E5%A4%B9%E8%A7%92%E4%BD%99%E5%BC%A6"><span class="toc-number">2.2.7.</span> <span class="toc-text">7.求矢量夹角余弦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%B1%82%E7%BA%BF%E6%AE%B5%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92"><span class="toc-number">2.2.8.</span> <span class="toc-text">8.求线段之间的夹角</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4"><span class="toc-number">2.2.9.</span> <span class="toc-text">9.判断线段是否相交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4%E4%BD%86%E4%B8%8D%E4%BA%A4%E5%9C%A8%E7%AB%AF%E7%82%B9%E5%A4%84"><span class="toc-number">2.2.10.</span> <span class="toc-text">10.判断线段是否相交但不交在端点处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E6%B1%82%E7%BA%BF%E6%AE%B5%E6%89%80%E5%9C%A8%E7%9B%B4%E7%BA%BF%E7%9A%84%E6%96%B9%E7%A8%8B"><span class="toc-number">2.2.11.</span> <span class="toc-text">11.求线段所在直线的方程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E6%B1%82%E7%9B%B4%E7%BA%BF%E7%9A%84%E6%96%9C%E7%8E%87"><span class="toc-number">2.2.12.</span> <span class="toc-text">12.求直线的斜率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E6%B1%82%E7%9B%B4%E7%BA%BF%E7%9A%84%E5%80%BE%E6%96%9C%E8%A7%92"><span class="toc-number">2.2.13.</span> <span class="toc-text">13.求直线的倾斜角</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%B1%82%E7%82%B9%E5%85%B3%E4%BA%8E%E6%9F%90%E7%9B%B4%E7%BA%BF%E7%9A%84%E5%AF%B9%E7%A7%B0%E7%82%B9"><span class="toc-number">2.2.14.</span> <span class="toc-text">14.求点关于某直线的对称点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E5%88%A4%E6%96%AD%E4%B8%A4%E6%9D%A1%E7%9B%B4%E7%BA%BF%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4%E5%8F%8A%E6%B1%82%E7%9B%B4%E7%BA%BF%E4%BA%A4%E7%82%B9"><span class="toc-number">2.2.15.</span> <span class="toc-text">15.判断两条直线是否相交及求直线交点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%9B%B8%E4%BA%A4%E8%BF%94%E5%9B%9E%E4%BA%A4%E7%82%B9"><span class="toc-number">2.2.16.</span> <span class="toc-text">16.判断线段是否相交，如果相交返回交点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text">三.多边形常用算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E6%98%AF%E5%90%A6%E7%AE%80%E5%8D%95%E5%A4%9A%E8%BE%B9%E5%BD%A2"><span class="toc-number">2.3.1.</span> <span class="toc-text">1.判断多边形是否简单多边形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A3%80%E6%9F%A5%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%A1%B6%E7%82%B9%E7%9A%84%E5%87%B8%E5%87%B9%E6%80%A7"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.检查多边形顶点的凸凹性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E6%98%AF%E5%90%A6%E5%87%B8%E5%A4%9A%E8%BE%B9%E5%BD%A2"><span class="toc-number">2.3.3.</span> <span class="toc-text">3.判断多边形是否凸多边形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B1%82%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%9D%A2%E7%A7%AF"><span class="toc-number">2.3.4.</span> <span class="toc-text">4.求多边形面积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%A1%B6%E7%82%B9%E7%9A%84%E6%8E%92%E5%88%97%E6%96%B9%E5%90%91%EF%BC%8C%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">2.3.5.</span> <span class="toc-text">5.判断多边形顶点的排列方向，方法一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%A1%B6%E7%82%B9%E7%9A%84%E6%8E%92%E5%88%97%E6%96%B9%E5%90%91%EF%BC%8C%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">2.3.6.</span> <span class="toc-text">6.判断多边形顶点的排列方向，方法二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%B0%84%E7%BA%BF%E6%B3%95%E5%88%A4%E6%96%AD%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.3.7.</span> <span class="toc-text">7.射线法判断点是否在多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%88%A4%E6%96%AD%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E5%87%B8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.3.8.</span> <span class="toc-text">8.判断点是否在凸多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%AF%BB%E6%89%BE%E7%82%B9%E9%9B%86%E7%9A%84graham%E7%AE%97%E6%B3%95"><span class="toc-number">2.3.9.</span> <span class="toc-text">9.寻找点集的graham算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%AF%BB%E6%89%BE%E7%82%B9%E9%9B%86%E5%87%B8%E5%8C%85%E7%9A%84%E5%8D%B7%E5%8C%85%E8%A3%B9%E6%B3%95"><span class="toc-number">2.3.10.</span> <span class="toc-text">10.寻找点集凸包的卷包裹法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E5%9C%A8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.3.11.</span> <span class="toc-text">11.判断线段是否在多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E6%B1%82%E7%AE%80%E5%8D%95%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E9%87%8D%E5%BF%83"><span class="toc-number">2.3.12.</span> <span class="toc-text">12.求简单多边形的重心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E6%B1%82%E5%87%B8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E9%87%8D%E5%BF%83"><span class="toc-number">2.3.13.</span> <span class="toc-text">13.求凸多边形的重心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%B1%82%E8%82%AF%E5%AE%9A%E5%9C%A8%E7%BB%99%E5%AE%9A%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85%E7%9A%84%E4%B8%80%E4%B8%AA%E7%82%B9"><span class="toc-number">2.3.14.</span> <span class="toc-text">14.求肯定在给定多边形内的一个点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E6%B1%82%E4%BB%8E%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%A4%96%E4%B8%80%E7%82%B9%E5%87%BA%E5%8F%91%E5%88%B0%E8%AF%A5%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E5%88%87%E7%BA%BF"><span class="toc-number">2.3.15.</span> <span class="toc-text">15.求从多边形外一点出发到该多边形的切线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E6%A0%B8%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">2.3.16.</span> <span class="toc-text">16.判断多边形的核是否存在</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E5%9C%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.4.</span> <span class="toc-text">四.圆的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E5%9C%86%E5%86%85"><span class="toc-number">2.4.1.</span> <span class="toc-text">1.点是否在圆内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B1%82%E4%B8%8D%E5%85%B1%E7%BA%BF%E7%9A%84%E4%B8%89%E7%82%B9%E6%89%80%E7%A1%AE%E5%AE%9A%E7%9A%84%E5%9C%86"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.求不共线的三点所确定的圆</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A9%E5%BD%A2%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.5.</span> <span class="toc-text">矩形的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B7%B2%E7%9F%A5%E7%9F%A9%E5%BD%A2%E4%B8%89%E7%82%B9%E5%9D%90%E6%A0%87%EF%BC%8C%E6%B1%82%E7%AC%AC4%E7%82%B9%E5%9D%90%E6%A0%87"><span class="toc-number">2.5.1.</span> <span class="toc-text">1.已知矩形三点坐标，求第4点坐标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.6.</span> <span class="toc-text">五.常用算法的描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E8%A1%A5%E5%85%85"><span class="toc-number">2.7.</span> <span class="toc-text">六.补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%A4%E5%9C%86%E5%85%B3%E7%B3%BB"><span class="toc-number">2.7.1.</span> <span class="toc-text">1.两圆关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A4%E6%96%AD%E5%9C%86%E6%98%AF%E5%90%A6%E5%9C%A8%E7%9F%A9%E5%BD%A2%E5%86%85"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.判断圆是否在矩形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%82%B9%E5%88%B0%E5%B9%B3%E9%9D%A2%E7%9A%84%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.7.3.</span> <span class="toc-text">3.点到平面的距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E7%9B%B4%E7%BA%BF%E5%90%8C%E4%BE%A7"><span class="toc-number">2.7.4.</span> <span class="toc-text">4.点是否在直线同侧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%BA%BF"><span class="toc-number">2.7.5.</span> <span class="toc-text">5.镜面反射线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%9F%A9%E5%BD%A2%E5%8C%85%E5%90%AB"><span class="toc-number">2.7.6.</span> <span class="toc-text">6.矩形包含</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%B8%A4%E5%9C%86%E4%BA%A4%E7%82%B9"><span class="toc-number">2.7.7.</span> <span class="toc-text">7.两圆交点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%B8%A4%E5%9C%86%E5%85%AC%E5%85%B1%E9%9D%A2%E7%A7%AF"><span class="toc-number">2.7.8.</span> <span class="toc-text">8.两圆公共面积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%9C%86%E5%92%8C%E7%9B%B4%E7%BA%BF%E5%85%B3%E7%B3%BB"><span class="toc-number">2.7.9.</span> <span class="toc-text">9.圆和直线关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%86%85%E5%88%87%E5%9C%86"><span class="toc-number">2.7.10.</span> <span class="toc-text">10.内切圆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E6%B1%82%E5%88%87%E7%82%B9"><span class="toc-number">2.7.11.</span> <span class="toc-text">11.求切点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E7%BA%BF%E6%AE%B5%E7%9A%84%E5%B7%A6%E5%8F%B3%E6%97%8B"><span class="toc-number">2.7.12.</span> <span class="toc-text">12.线段的左右旋</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%85%AC%E5%BC%8F"><span class="toc-number">2.7.13.</span> <span class="toc-text">13.公式</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        C++几何算法大全
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Radica</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2022-05-23T08:42:13.000Z" itemprop="datePublished">2022-05-23</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/C/" rel="tag">C++</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>转载自<a target="_blank" rel="noopener" href="https://yisin.top/2020/02/12/%E8%BD%AC%E8%BD%BD-c-%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/">YiSin</a>的blog</p>
<h1 id="前置条件"><a href="#前置条件" class="headerlink" title="前置条件"></a>前置条件</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 需要包含的头文件 */</span> </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath &gt;</span> </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 常用的常量定义 */</span> </span><br><span class="line"><span class="type">const</span> <span class="type">double</span>    INF   = <span class="number">1E200</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span>    EP    = <span class="number">1E-10</span> </span><br><span class="line"><span class="type">const</span> <span class="type">int</span>       MAXV  = <span class="number">300</span> </span><br><span class="line"><span class="type">const</span> <span class="type">double</span>    PI    = <span class="number">3.14159265</span> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 基本几何结构 */</span> </span><br><span class="line"><span class="keyword">struct</span> POINT </span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> x; </span><br><span class="line">    <span class="type">double</span> y; </span><br><span class="line">    <span class="built_in">POINT</span>(<span class="type">double</span> a=<span class="number">0</span>, <span class="type">double</span> b=<span class="number">0</span>) &#123; x=a; y=b;&#125; <span class="comment">//constructor </span></span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LINESEG</span> </span><br><span class="line">&#123; </span><br><span class="line">    POINT s; </span><br><span class="line">    POINT e; </span><br><span class="line">    <span class="built_in">LINESEG</span>(POINT a, POINT b) &#123; s=a; e=b;&#125; </span><br><span class="line">    <span class="built_in">LINESEG</span>() &#123;&#125; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LINE</span>           <span class="comment">// 直线的解析方程 a*x+b*y+c=0  为统一表示，约定 a &gt;= 0 </span></span><br><span class="line">&#123; </span><br><span class="line">   <span class="type">double</span> a; </span><br><span class="line">   <span class="type">double</span> b; </span><br><span class="line">   <span class="type">double</span> c; </span><br><span class="line">   <span class="built_in">LINE</span>(<span class="type">double</span> d1=<span class="number">1</span>, <span class="type">double</span> d2=<span class="number">-1</span>, <span class="type">double</span> d3=<span class="number">0</span>) &#123;a=d1; b=d2; c=d3;&#125; </span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><h2 id="一-点的基本运算"><a href="#一-点的基本运算" class="headerlink" title="一.点的基本运算"></a>一.点的基本运算</h2><h3 id="1-平面上两点之间距离"><a href="#1-平面上两点之间距离" class="headerlink" title="1.平面上两点之间距离"></a>1.平面上两点之间距离</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">dist</span><span class="params">(POINT p1,POINT p2)</span> <span class="comment">// 返回两点之间欧氏距离 </span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span>( <span class="built_in">sqrt</span>( (p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y) ) ); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="2-判断两点是否重合"><a href="#2-判断两点是否重合" class="headerlink" title="2.判断两点是否重合"></a>2.判断两点是否重合</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">equal_point</span><span class="params">(POINT p1,POINT p2)</span>           <span class="comment">// 判断两个点是否重合  </span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> ( (<span class="built_in">abs</span>(p1.x-p2.x)&lt;EP)&amp;&amp;(<span class="built_in">abs</span>(p1.y-p2.y)&lt;EP) ); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="3-矢量叉乘"><a href="#3-矢量叉乘" class="headerlink" title="3.矢量叉乘"></a>3.矢量叉乘</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/****************************************************************************** </span></span><br><span class="line"><span class="comment">r=multiply(sp,ep,op),得到(sp-op)和(ep-op)的叉积 </span></span><br><span class="line"><span class="comment">r&gt;0：ep在矢量opsp的逆时针方向； </span></span><br><span class="line"><span class="comment">r=0：opspep三点共线； </span></span><br><span class="line"><span class="comment">r&lt;0：ep在矢量opsp的顺时针方向 </span></span><br><span class="line"><span class="comment">*******************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">multiply</span><span class="params">(POINT sp,POINT ep,POINT op)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span>((sp.x-op.x)*(ep.y-op.y)-(ep.x-op.x)*(sp.y-op.y)); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="4-矢量点乘"><a href="#4-矢量点乘" class="headerlink" title="4.矢量点乘"></a>4.矢量点乘</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******************************************************************************</span></span><br><span class="line"><span class="comment">r=dotmultiply(p1,p2,op),得到矢量(p1-op)和(p2-op)的点积，如果两个矢量都非零矢量 </span></span><br><span class="line"><span class="comment">r&lt;0：两矢量夹角为锐角；</span></span><br><span class="line"><span class="comment">r=0：两矢量夹角为直角；</span></span><br><span class="line"><span class="comment">r&gt;0：两矢量夹角为钝角 </span></span><br><span class="line"><span class="comment">*******************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">dotmultiply</span><span class="params">(POINT p1,POINT p2,POINT p0)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> ((p1.x-p0.x)*(p2.x-p0.x)+(p1.y-p0.y)*(p2.y-p0.y)); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="5-判断点是否在线段上"><a href="#5-判断点是否在线段上" class="headerlink" title="5.判断点是否在线段上"></a>5.判断点是否在线段上</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/****************************************************************************** </span></span><br><span class="line"><span class="comment">判断点p是否在线段l上</span></span><br><span class="line"><span class="comment">条件：(p在线段l所在的直线上) &amp;&amp; (点p在以线段l为对角线的矩形内)</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">online</span><span class="params">(LINESEG l,POINT p)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span>( (<span class="built_in">multiply</span>(l.e,p,l.s)==<span class="number">0</span>) &amp;&amp;( ( (p.x-l.s.x)*(p.x-l.e.x)&lt;=<span class="number">0</span> )&amp;&amp;( (p.y-l.s.y)*(p.y-l.e.y)&lt;=<span class="number">0</span> ) ) ); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="6-求一点饶某点旋转后的坐标"><a href="#6-求一点饶某点旋转后的坐标" class="headerlink" title="6.求一点饶某点旋转后的坐标"></a>6.求一点饶某点旋转后的坐标</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回点p以点o为圆心逆时针旋转alpha(单位：弧度)后所在的位置 </span></span><br><span class="line"><span class="function">POINT <span class="title">rotate</span><span class="params">(POINT o,<span class="type">double</span> alpha,POINT p)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT tp; </span><br><span class="line">    p.x-=o.x; </span><br><span class="line">    p.y-=o.y; </span><br><span class="line">    tp.x=p.x*<span class="built_in">cos</span>(alpha)-p.y*<span class="built_in">sin</span>(alpha)+o.x; </span><br><span class="line">    tp.y=p.y*<span class="built_in">cos</span>(alpha)+p.x*<span class="built_in">sin</span>(alpha)+o.y; </span><br><span class="line">    <span class="keyword">return</span> tp; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="7-求矢量夹角"><a href="#7-求矢量夹角" class="headerlink" title="7.求矢量夹角"></a>7.求矢量夹角</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 返回顶角在o点，起始边为os，终止边为oe的夹角(单位：弧度) </span></span><br><span class="line"><span class="comment">    角度小于pi，返回正值 </span></span><br><span class="line"><span class="comment">    角度大于pi，返回负值 </span></span><br><span class="line"><span class="comment">    可以用于求线段之间的夹角 </span></span><br><span class="line"><span class="comment">原理：</span></span><br><span class="line"><span class="comment">    r = dotmultiply(s,e,o) / (dist(o,s)*dist(o,e))</span></span><br><span class="line"><span class="comment">    r&#x27;= multiply(s,e,o)</span></span><br><span class="line"><span class="comment">    r &gt;= 1    angle = 0;</span></span><br><span class="line"><span class="comment">    r &lt;= -1    angle = -PI</span></span><br><span class="line"><span class="comment">    -1&lt;r&lt;1 &amp;&amp; r&#x27;&gt;0    angle = arccos(r)</span></span><br><span class="line"><span class="comment">    -1&lt;r&lt;1 &amp;&amp; r&#x27;&lt;=0    angle = -arccos(r)</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">angle</span><span class="params">(POINT o,POINT s,POINT e)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> cosfi,fi,norm; </span><br><span class="line">    <span class="type">double</span> dsx = s.x - o.x; </span><br><span class="line">    <span class="type">double</span> dsy = s.y - o.y; </span><br><span class="line">    <span class="type">double</span> dex = e.x - o.x; </span><br><span class="line">    <span class="type">double</span> dey = e.y - o.y; </span><br><span class="line"> </span><br><span class="line">    cosfi=dsx*dex+dsy*dey; </span><br><span class="line">    norm=(dsx*dsx+dsy*dsy)*(dex*dex+dey*dey); </span><br><span class="line">    cosfi /= <span class="built_in">sqrt</span>( norm ); </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (cosfi &gt;=  <span class="number">1.0</span> ) <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">if</span> (cosfi &lt;= <span class="number">-1.0</span> ) <span class="keyword">return</span> <span class="number">-3.1415926</span>; </span><br><span class="line"> </span><br><span class="line">    fi=<span class="built_in">acos</span>(cosfi); </span><br><span class="line">    <span class="keyword">if</span> (dsx*dey-dsy*dex&gt;<span class="number">0</span>) <span class="keyword">return</span> fi;      <span class="comment">// 说明矢量os 在矢量 oe的顺时针方向 </span></span><br><span class="line">    <span class="keyword">return</span> -fi; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h2 id="二-线段及直线的基本运算"><a href="#二-线段及直线的基本运算" class="headerlink" title="二.线段及直线的基本运算"></a>二.线段及直线的基本运算</h2><h3 id="1-点与线段的关系"><a href="#1-点与线段的关系" class="headerlink" title="1.点与线段的关系"></a>1.点与线段的关系</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/*****************************\ </span></span><br><span class="line"><span class="comment">  *                             * </span></span><br><span class="line"><span class="comment">  *      线段及直线的基本运算   * </span></span><br><span class="line"><span class="comment">  *                             * </span></span><br><span class="line"><span class="comment">  \*****************************/</span> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 判断点与线段的关系,用途很广泛 </span></span><br><span class="line"><span class="comment">本函数是根据下面的公式写的，P是点C到线段AB所在直线的垂足 </span></span><br><span class="line"><span class="comment">                AC dot AB </span></span><br><span class="line"><span class="comment">        r =     --------- </span></span><br><span class="line"><span class="comment">                 ||AB||^2 </span></span><br><span class="line"><span class="comment">             (Cx-Ax)(Bx-Ax) + (Cy-Ay)(By-Ay) </span></span><br><span class="line"><span class="comment">          = ------------------------------- </span></span><br><span class="line"><span class="comment">                          L^2 </span></span><br><span class="line"><span class="comment">    r has the following meaning: </span></span><br><span class="line"><span class="comment">        r=0      P = A </span></span><br><span class="line"><span class="comment">        r=1      P = B </span></span><br><span class="line"><span class="comment">        r&lt;0         P is on the backward extension of AB </span></span><br><span class="line"><span class="comment">        r&gt;1      P is on the forward extension of AB </span></span><br><span class="line"><span class="comment">        0&lt;r&lt;1     P is interior to AB </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">relation</span><span class="params">(POINT p,LINESEG l)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    LINESEG tl; </span><br><span class="line">    tl.s=l.s; </span><br><span class="line">    tl.e=p; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dotmultiply</span>(tl.e,l.e,l.s)/(<span class="built_in">dist</span>(l.s,l.e)*<span class="built_in">dist</span>(l.s,l.e)); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="2-求点到线段所在直线垂线的垂足"><a href="#2-求点到线段所在直线垂线的垂足" class="headerlink" title="2.求点到线段所在直线垂线的垂足"></a>2.求点到线段所在直线垂线的垂足</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">POINT <span class="title">perpendicular</span><span class="params">(POINT p,LINESEG l)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> r=<span class="built_in">relation</span>(p,l); </span><br><span class="line">    POINT tp; </span><br><span class="line">    tp.x=l.s.x+r*(l.e.x-l.s.x); </span><br><span class="line">    tp.y=l.s.y+r*(l.e.y-l.s.y); </span><br><span class="line">    <span class="keyword">return</span> tp; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="3-点到线段的最近点"><a href="#3-点到线段的最近点" class="headerlink" title="3.点到线段的最近点"></a>3.点到线段的最近点</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 求点p到线段l的最短距离,并返回线段上距该点最近的点np </span></span><br><span class="line"><span class="comment">注意：np是线段l上到点p最近的点，不一定是垂足 */</span> </span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">ptolinesegdist</span><span class="params">(POINT p,LINESEG l,POINT &amp;np)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> r=<span class="built_in">relation</span>(p,l); </span><br><span class="line">    <span class="keyword">if</span>(r&lt;<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        np=l.s; </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dist</span>(p,l.s); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span>(r&gt;<span class="number">1</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        np=l.e; </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dist</span>(p,l.e); </span><br><span class="line">    &#125; </span><br><span class="line">    np=<span class="built_in">perpendicular</span>(p,l); </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dist</span>(p,np); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="4-点到线段所在直线的距离"><a href="#4-点到线段所在直线的距离" class="headerlink" title="4.点到线段所在直线的距离"></a>4.点到线段所在直线的距离</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求点p到线段l所在直线的距离,请注意本函数与上个函数的区别  </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">ptoldist</span><span class="params">(POINT p,LINESEG l)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">abs</span>(<span class="built_in">multiply</span>(p,l.e,l.s))/<span class="built_in">dist</span>(l.s,l.e); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="5-点到折线集的最近距离"><a href="#5-点到折线集的最近距离" class="headerlink" title="5.点到折线集的最近距离"></a>5.点到折线集的最近距离</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 计算点到折线集的最近距离,并返回最近点. </span></span><br><span class="line"><span class="comment">注意：调用的是ptolineseg()函数 */</span> </span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">ptopointset</span><span class="params">(<span class="type">int</span> vcount,POINT pointset[],POINT p,POINT &amp;q)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> i; </span><br><span class="line">    <span class="type">double</span> cd=<span class="built_in">double</span>(INF),td; </span><br><span class="line">    LINESEG l; </span><br><span class="line">    POINT tq,cq; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount<span class="number">-1</span>;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        l.s=pointset[i]; </span><br><span class="line"> </span><br><span class="line">        l.e=pointset[i+<span class="number">1</span>]; </span><br><span class="line">        td=<span class="built_in">ptolinesegdist</span>(p,l,tq); </span><br><span class="line">        <span class="keyword">if</span>(td&lt;cd) </span><br><span class="line">        &#123; </span><br><span class="line">            cd=td; </span><br><span class="line">            cq=tq; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    q=cq; </span><br><span class="line">    <span class="keyword">return</span> cd; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="6-判断圆是否在多边形内"><a href="#6-判断圆是否在多边形内" class="headerlink" title="6.判断圆是否在多边形内"></a>6.判断圆是否在多边形内</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 判断圆是否在多边形内.ptolineseg()函数的应用2 */</span> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CircleInsidePolygon</span><span class="params">(<span class="type">int</span> vcount,POINT center,<span class="type">double</span> radius,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT q; </span><br><span class="line">    <span class="type">double</span> d; </span><br><span class="line">    q.x=<span class="number">0</span>; </span><br><span class="line">    q.y=<span class="number">0</span>; </span><br><span class="line">    d=<span class="built_in">ptopointset</span>(vcount,polygon,center,q); </span><br><span class="line">    <span class="keyword">if</span>(d&lt;radius||<span class="built_in">fabs</span>(d-radius)&lt;EP) </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="7-求矢量夹角余弦"><a href="#7-求矢量夹角余弦" class="headerlink" title="7.求矢量夹角余弦"></a>7.求矢量夹角余弦</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 返回两个矢量l1和l2的夹角的余弦(-1 --- 1)注意：如果想从余弦求夹角的话，注意反余弦函数的定义域是从 0到pi */</span> </span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">cosine</span><span class="params">(LINESEG l1,LINESEG l2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> (((l1.e.x-l1.s.x)*(l2.e.x-l2.s.x) + </span><br><span class="line">    (l1.e.y-l1.s.y)*(l2.e.y-l2.s.y))/(<span class="built_in">dist</span>(l1.e,l1.s)*<span class="built_in">dist</span>(l2.e,l2.s))) ); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="8-求线段之间的夹角"><a href="#8-求线段之间的夹角" class="headerlink" title="8.求线段之间的夹角"></a>8.求线段之间的夹角</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回线段l1与l2之间的夹角 单位：弧度 范围(-pi，pi) </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">lsangle</span><span class="params">(LINESEG l1,LINESEG l2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT o,s,e; </span><br><span class="line">    o.x=o.y=<span class="number">0</span>; </span><br><span class="line">    s.x=l1.e.x-l1.s.x; </span><br><span class="line">    s.y=l1.e.y-l1.s.y; </span><br><span class="line">    e.x=l2.e.x-l2.s.x; </span><br><span class="line">    e.y=l2.e.y-l2.s.y; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">angle</span>(o,s,e); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="9-判断线段是否相交"><a href="#9-判断线段是否相交" class="headerlink" title="9.判断线段是否相交"></a>9.判断线段是否相交</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果线段u和v相交(包括相交在端点处)时，返回true </span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//判断P1P2跨立Q1Q2的依据是：( P1 - Q1 ) × ( Q2 - Q1 ) * ( Q2 - Q1 ) × ( P2 - Q1 ) &gt;= 0。</span></span><br><span class="line"><span class="comment">//判断Q1Q2跨立P1P2的依据是：( Q1 - P1 ) × ( P2 - P1 ) * ( P2 - P1 ) × ( Q2 - P1 ) &gt;= 0。</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">intersect</span><span class="params">(LINESEG u,LINESEG v)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span>( (<span class="built_in">max</span>(u.s.x,u.e.x)&gt;=<span class="built_in">min</span>(v.s.x,v.e.x))&amp;&amp;                     <span class="comment">//排斥实验 </span></span><br><span class="line">            (<span class="built_in">max</span>(v.s.x,v.e.x)&gt;=<span class="built_in">min</span>(u.s.x,u.e.x))&amp;&amp; </span><br><span class="line">            (<span class="built_in">max</span>(u.s.y,u.e.y)&gt;=<span class="built_in">min</span>(v.s.y,v.e.y))&amp;&amp; </span><br><span class="line">            (<span class="built_in">max</span>(v.s.y,v.e.y)&gt;=<span class="built_in">min</span>(u.s.y,u.e.y))&amp;&amp; </span><br><span class="line">            (<span class="built_in">multiply</span>(v.s,u.e,u.s)*<span class="built_in">multiply</span>(u.e,v.e,u.s)&gt;=<span class="number">0</span>)&amp;&amp;         <span class="comment">//跨立实验 </span></span><br><span class="line">            (<span class="built_in">multiply</span>(u.s,v.e,v.s)*<span class="built_in">multiply</span>(v.e,u.e,v.s)&gt;=<span class="number">0</span>)); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="10-判断线段是否相交但不交在端点处"><a href="#10-判断线段是否相交但不交在端点处" class="headerlink" title="10.判断线段是否相交但不交在端点处"></a>10.判断线段是否相交但不交在端点处</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  (线段u和v相交)&amp;&amp;(交点不是双方的端点) 时返回true    </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">intersect_A</span><span class="params">(LINESEG u,LINESEG v)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span>    ((<span class="built_in">intersect</span>(u,v))&amp;&amp; </span><br><span class="line">            (!<span class="built_in">online</span>(u,v.s))&amp;&amp; </span><br><span class="line">            (!<span class="built_in">online</span>(u,v.e))&amp;&amp; </span><br><span class="line">            (!<span class="built_in">online</span>(v,u.e))&amp;&amp; </span><br><span class="line">            (!<span class="built_in">online</span>(v,u.s))); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="11-求线段所在直线的方程"><a href="#11-求线段所在直线的方程" class="headerlink" title="11.求线段所在直线的方程"></a>11.求线段所在直线的方程</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据已知两点坐标，求过这两点的直线解析方程： a*x+b*y+c = 0  (a &gt;= 0)  </span></span><br><span class="line"><span class="function">LINE <span class="title">makeline</span><span class="params">(POINT p1,POINT p2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    LINE tl; </span><br><span class="line">    <span class="type">int</span> sign = <span class="number">1</span>; </span><br><span class="line">    tl.a=p2.y-p1.y; </span><br><span class="line">    <span class="keyword">if</span>(tl.a&lt;<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        sign = <span class="number">-1</span>; </span><br><span class="line">        tl.a=sign*tl.a; </span><br><span class="line">    &#125; </span><br><span class="line">    tl.b=sign*(p1.x-p2.x); </span><br><span class="line">    tl.c=sign*(p1.y*p2.x-p1.x*p2.y); </span><br><span class="line">    <span class="keyword">return</span> tl; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="12-求直线的斜率"><a href="#12-求直线的斜率" class="headerlink" title="12.求直线的斜率"></a>12.求直线的斜率</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据直线解析方程返回直线的斜率k,水平线返回 0,竖直线返回 1e200 </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">slope</span><span class="params">(LINE l)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(l.a) &lt; <span class="number">1e-20</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(l.b) &lt; <span class="number">1e-20</span>)</span><br><span class="line">        <span class="keyword">return</span> INF; </span><br><span class="line">    <span class="keyword">return</span> -(l.a/l.b); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="13-求直线的倾斜角"><a href="#13-求直线的倾斜角" class="headerlink" title="13.求直线的倾斜角"></a>13.求直线的倾斜角</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回直线的倾斜角alpha ( 0 - pi) </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">alpha</span><span class="params">(LINE l)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(l.a)&lt; EP)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(l.b)&lt; EP)</span><br><span class="line">        <span class="keyword">return</span> PI/<span class="number">2</span>; </span><br><span class="line">    <span class="type">double</span> k=<span class="built_in">slope</span>(l); </span><br><span class="line">    <span class="keyword">if</span>(k&gt;<span class="number">0</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">atan</span>(k); </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> PI+<span class="built_in">atan</span>(k); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="14-求点关于某直线的对称点"><a href="#14-求点关于某直线的对称点" class="headerlink" title="14.求点关于某直线的对称点"></a>14.求点关于某直线的对称点</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求点p关于直线l的对称点  </span></span><br><span class="line"><span class="function">POINT <span class="title">symmetry</span><span class="params">(LINE l,POINT p)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">   POINT tp; </span><br><span class="line">   tp.x=((l.b*l.b-l.a*l.a)*p.x<span class="number">-2</span>*l.a*l.b*p.y<span class="number">-2</span>*l.a*l.c)/(l.a*l.a+l.b*l.b); </span><br><span class="line">   tp.y=((l.a*l.a-l.b*l.b)*p.y<span class="number">-2</span>*l.a*l.b*p.x<span class="number">-2</span>*l.b*l.c)/(l.a*l.a+l.b*l.b); </span><br><span class="line">   <span class="keyword">return</span> tp; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="15-判断两条直线是否相交及求直线交点"><a href="#15-判断两条直线是否相交及求直线交点" class="headerlink" title="15.判断两条直线是否相交及求直线交点"></a>15.判断两条直线是否相交及求直线交点</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果两条直线 l1(a1*x+b1*y+c1 = 0), l2(a2*x+b2*y+c2 = 0)相交，返回true，且返回交点p  </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">lineintersect</span><span class="params">(LINE l1,LINE l2,POINT &amp;p)</span> <span class="comment">// 是 L1，L2 </span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> d=l1.a*l2.b-l2.a*l1.b; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(d)&lt;EP) <span class="comment">// 不相交 </span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    p.x = (l2.c*l1.b-l1.c*l2.b)/d; </span><br><span class="line">    p.y = (l2.a*l1.c-l1.a*l2.c)/d; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="16-判断线段是否相交，如果相交返回交点"><a href="#16-判断线段是否相交，如果相交返回交点" class="headerlink" title="16.判断线段是否相交，如果相交返回交点"></a>16.判断线段是否相交，如果相交返回交点</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果线段l1和l2相交，返回true且交点由(inter)返回，否则返回false </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">intersection</span><span class="params">(LINESEG l1,LINESEG l2,POINT &amp;inter)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    LINE ll1,ll2; </span><br><span class="line">    ll1=<span class="built_in">makeline</span>(l1.s,l1.e); </span><br><span class="line">    ll2=<span class="built_in">makeline</span>(l2.s,l2.e); </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">lineintersect</span>(ll1,ll2,inter)) </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">online</span>(l1,inter); </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="三-多边形常用算法"><a href="#三-多边形常用算法" class="headerlink" title="三.多边形常用算法"></a>三.多边形常用算法</h2><h3 id="1-判断多边形是否简单多边形"><a href="#1-判断多边形是否简单多边形" class="headerlink" title="1.判断多边形是否简单多边形"></a>1.判断多边形是否简单多边形</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果无特别说明，输入多边形顶点要求按逆时针排列 </span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">返回值：输入的多边形是简单多边形，返回true </span></span><br><span class="line"><span class="comment">要 求：输入顶点序列按逆时针排序 </span></span><br><span class="line"><span class="comment">说 明：简单多边形定义： </span></span><br><span class="line"><span class="comment">1：循环排序中相邻线段对的交是他们之间共有的单个点 </span></span><br><span class="line"><span class="comment">2：不相邻的线段不相交 </span></span><br><span class="line"><span class="comment">本程序默认第一个条件已经满足 </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">issimple</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> i,cn; </span><br><span class="line">    LINESEG l1,l2; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        l1.s=polygon[i]; </span><br><span class="line">        l1.e=polygon[(i+<span class="number">1</span>)%vcount]; </span><br><span class="line">        cn=vcount<span class="number">-3</span>; </span><br><span class="line">        <span class="keyword">while</span>(cn) </span><br><span class="line">        &#123; </span><br><span class="line">            l2.s=polygon[(i+<span class="number">2</span>)%vcount]; </span><br><span class="line">            l2.e=polygon[(i+<span class="number">3</span>)%vcount]; </span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">intersect</span>(l1,l2)) </span><br><span class="line">                <span class="keyword">break</span>; </span><br><span class="line">            cn--; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span>(cn) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="2-检查多边形顶点的凸凹性"><a href="#2-检查多边形顶点的凸凹性" class="headerlink" title="2.检查多边形顶点的凸凹性"></a>2.检查多边形顶点的凸凹性</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回值：按输入顺序返回多边形顶点的凸凹性判断，bc[i]=1,iff:第i个顶点是凸顶点 </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">checkconvex</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[],<span class="type">bool</span> bc[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> i,index=<span class="number">0</span>; </span><br><span class="line">    POINT tp=polygon[<span class="number">0</span>]; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;vcount;i++) <span class="comment">// 寻找第一个凸顶点 </span></span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span>(polygon[i].y&lt;tp.y||(polygon[i].y == tp.y&amp;&amp;polygon[i].x&lt;tp.x)) </span><br><span class="line">        &#123; </span><br><span class="line">            tp=polygon[i]; </span><br><span class="line">            index=i; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="type">int</span> count=vcount<span class="number">-1</span>; </span><br><span class="line">    bc[index]=<span class="number">1</span>; </span><br><span class="line">    <span class="keyword">while</span>(count) <span class="comment">// 判断凸凹性 </span></span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">multiply</span>(polygon[(index+<span class="number">1</span>)%vcount],polygon[(index+<span class="number">2</span>)%vcount],polygon[index])&gt;=<span class="number">0</span> ) </span><br><span class="line">            bc[(index+<span class="number">1</span>)%vcount]=<span class="number">1</span>; </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            bc[(index+<span class="number">1</span>)%vcount]=<span class="number">0</span>; </span><br><span class="line">        index++; </span><br><span class="line">        count--; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-判断多边形是否凸多边形"><a href="#3-判断多边形是否凸多边形" class="headerlink" title="3.判断多边形是否凸多边形"></a>3.判断多边形是否凸多边形</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回值：多边形polygon是凸多边形时，返回true  </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isconvex</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">bool</span> bc[MAXV]; </span><br><span class="line">    <span class="built_in">checkconvex</span>(vcount,polygon,bc); </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;vcount;i++) <span class="comment">// 逐一检查顶点，是否全部是凸顶点 </span></span><br><span class="line">        <span class="keyword">if</span>(!bc[i]) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="4-求多边形面积"><a href="#4-求多边形面积" class="headerlink" title="4.求多边形面积"></a>4.求多边形面积</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回多边形面积(signed)；输入顶点按逆时针排列时，返回正值；否则返回负值 </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">area_of_polygon</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> i; </span><br><span class="line">    <span class="type">double</span> s; </span><br><span class="line">    <span class="keyword">if</span> (vcount&lt;<span class="number">3</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    s=polygon[<span class="number">0</span>].y*(polygon[vcount<span class="number">-1</span>].x-polygon[<span class="number">1</span>].x); </span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;vcount;i++) </span><br><span class="line">        s+=polygon[i].y*(polygon[(i<span class="number">-1</span>)].x-polygon[(i+<span class="number">1</span>)%vcount].x); </span><br><span class="line">    <span class="keyword">return</span> s/<span class="number">2</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="5-判断多边形顶点的排列方向，方法一"><a href="#5-判断多边形顶点的排列方向，方法一" class="headerlink" title="5.判断多边形顶点的排列方向，方法一"></a>5.判断多边形顶点的排列方向，方法一</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果输入顶点按逆时针排列，返回true </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isconterclock</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">area_of_polygon</span>(vcount,polygon)&gt;<span class="number">0</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="6-判断多边形顶点的排列方向，方法二"><a href="#6-判断多边形顶点的排列方向，方法二" class="headerlink" title="6.判断多边形顶点的排列方向，方法二"></a>6.判断多边形顶点的排列方向，方法二</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 另一种判断多边形顶点排列方向的方法  </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isccwize</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> i,index; </span><br><span class="line">    POINT a,b,v; </span><br><span class="line">    v=polygon[<span class="number">0</span>]; </span><br><span class="line">    index=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;vcount;i++) <span class="comment">// 找到最低且最左顶点，肯定是凸顶点 </span></span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span>(polygon[i].y&lt;v.y||polygon[i].y == v.y &amp;&amp; polygon[i].x&lt;v.x) </span><br><span class="line">        &#123; </span><br><span class="line">            index=i; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    a=polygon[(index<span class="number">-1</span>+vcount)%vcount]; <span class="comment">// 顶点v的前一顶点 </span></span><br><span class="line">    b=polygon[(index+<span class="number">1</span>)%vcount]; <span class="comment">// 顶点v的后一顶点 </span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">multiply</span>(v,b,a)&gt;<span class="number">0</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="7-射线法判断点是否在多边形内"><a href="#7-射线法判断点是否在多边形内" class="headerlink" title="7.射线法判断点是否在多边形内"></a>7.射线法判断点是否在多边形内</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************************************  </span></span><br><span class="line"><span class="comment">射线法判断点q与多边形polygon的位置关系，要求polygon为简单多边形，顶点逆时针排列 </span></span><br><span class="line"><span class="comment">   如果点在多边形内：   返回0 </span></span><br><span class="line"><span class="comment">   如果点在多边形边上： 返回1 </span></span><br><span class="line"><span class="comment">   如果点在多边形外：    返回2 </span></span><br><span class="line"><span class="comment">*********************************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">insidepolygon</span><span class="params">(<span class="type">int</span> vcount,POINT Polygon[],POINT q)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> c=<span class="number">0</span>,i,n; </span><br><span class="line">    LINESEG l1,l2; </span><br><span class="line">    <span class="type">bool</span> bintersect_a,bonline1,bonline2,bonline3; </span><br><span class="line">    <span class="type">double</span> r1,r2; </span><br><span class="line"> </span><br><span class="line">    l1.s=q; </span><br><span class="line">    l1.e=q; </span><br><span class="line">    l1.e.x=<span class="built_in">double</span>(INF); </span><br><span class="line">    n=vcount; </span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        l2.s=Polygon[i]; </span><br><span class="line">        l2.e=Polygon[(i+<span class="number">1</span>)%n]; </span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">online</span>(l2,q))</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// 如果点在边上，返回1 </span></span><br><span class="line">        <span class="keyword">if</span> ( (bintersect_a=<span class="built_in">intersect_A</span>(l1,l2))|| <span class="comment">// 相交且不在端点 </span></span><br><span class="line">        ( (bonline1=<span class="built_in">online</span>(l1,Polygon[(i+<span class="number">1</span>)%n]))&amp;&amp; <span class="comment">// 第二个端点在射线上 </span></span><br><span class="line">        ( (!(bonline2=<span class="built_in">online</span>(l1,Polygon[(i+<span class="number">2</span>)%n])))&amp;&amp; <span class="comment">/* 前一个端点和后一个端点在射线两侧 */</span> </span><br><span class="line">        ((r1=<span class="built_in">multiply</span>(Polygon[i],Polygon[(i+<span class="number">1</span>)%n],l1.s)*<span class="built_in">multiply</span>(Polygon[(i+<span class="number">1</span>)%n],Polygon[(i+<span class="number">2</span>)%n],l1.s))&gt;<span class="number">0</span>) ||    </span><br><span class="line">        (bonline3=<span class="built_in">online</span>(l1,Polygon[(i+<span class="number">2</span>)%n]))&amp;&amp;     <span class="comment">/* 下一条边是水平线，前一个端点和后一个端点在射线两侧  */</span> </span><br><span class="line">            ((r2=<span class="built_in">multiply</span>(Polygon[i],Polygon[(i+<span class="number">2</span>)%n],l1.s)*<span class="built_in">multiply</span>(Polygon[(i+<span class="number">2</span>)%n], </span><br><span class="line">        Polygon[(i+<span class="number">3</span>)%n],l1.s))&gt;<span class="number">0</span>) </span><br><span class="line">                ) </span><br><span class="line">            ) </span><br><span class="line">        ) c++; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span>(c%<span class="number">2</span> == <span class="number">1</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="8-判断点是否在凸多边形内"><a href="#8-判断点是否在凸多边形内" class="headerlink" title="8.判断点是否在凸多边形内"></a>8.判断点是否在凸多边形内</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点q是凸多边形polygon内时，返回true；注意：多边形polygon一定要是凸多边形  </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">InsideConvexPolygon</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[],POINT q)</span> <span class="comment">// 可用于三角形！ </span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT p; </span><br><span class="line">    LINESEG l; </span><br><span class="line">    <span class="type">int</span> i; </span><br><span class="line">    p.x=<span class="number">0</span>;p.y=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount;i++) <span class="comment">// 寻找一个肯定在多边形polygon内的点p：多边形顶点平均值 </span></span><br><span class="line">    &#123; </span><br><span class="line">        p.x+=polygon[i].x; </span><br><span class="line">        p.y+=polygon[i].y; </span><br><span class="line">    &#125; </span><br><span class="line">    p.x /= vcount; </span><br><span class="line">    p.y /= vcount; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        l.s=polygon[i];l.e=polygon[(i+<span class="number">1</span>)%vcount]; </span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">multiply</span>(p,l.e,l.s)*<span class="built_in">multiply</span>(q,l.e,l.s)&lt;<span class="number">0</span>) <span class="comment">/* 点p和点q在边l的两侧，说明点q肯定在多边形外 */</span> </span><br><span class="line">        <span class="keyword">break</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> (i==vcount); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="9-寻找点集的graham算法"><a href="#9-寻找点集的graham算法" class="headerlink" title="9.寻找点集的graham算法"></a>9.寻找点集的graham算法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/********************************************** </span></span><br><span class="line"><span class="comment">寻找凸包的graham 扫描法 </span></span><br><span class="line"><span class="comment">PointSet为输入的点集； </span></span><br><span class="line"><span class="comment">ch为输出的凸包上的点集，按照逆时针方向排列; </span></span><br><span class="line"><span class="comment">n为PointSet中的点的数目 </span></span><br><span class="line"><span class="comment">len为输出的凸包上的点的个数 </span></span><br><span class="line"><span class="comment">**********************************************/</span> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Graham_scan</span><span class="params">(POINT PointSet[],POINT ch[],<span class="type">int</span> n,<span class="type">int</span> &amp;len)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> i,j,k=<span class="number">0</span>,top=<span class="number">2</span>; </span><br><span class="line">    POINT tmp; </span><br><span class="line">    <span class="comment">// 选取PointSet中y坐标最小的点PointSet[k]，如果这样的点有多个，则取最左边的一个 </span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++) </span><br><span class="line">        <span class="keyword">if</span> ( PointSet[i].y&lt;PointSet[k].y || (PointSet[i].y==PointSet[k].y) &amp;&amp; (PointSet[i].x&lt;PointSet[k].x) ) </span><br><span class="line">            k=i; </span><br><span class="line">    tmp=PointSet[<span class="number">0</span>]; </span><br><span class="line">    PointSet[<span class="number">0</span>]=PointSet[k]; </span><br><span class="line">    PointSet[k]=tmp; <span class="comment">// 现在PointSet中y坐标最小的点在PointSet[0] </span></span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">1</span>;i&lt;n<span class="number">-1</span>;i++) <span class="comment">/* 对顶点按照相对PointSet[0]的极角从小到大进行排序，极角相同的按照距离PointSet[0]从近到远进行排序 */</span> </span><br><span class="line">    &#123; </span><br><span class="line">        k=i; </span><br><span class="line">        <span class="keyword">for</span> (j=i+<span class="number">1</span>;j&lt;n;j++) </span><br><span class="line">            <span class="keyword">if</span> ( <span class="built_in">multiply</span>(PointSet[j],PointSet[k],PointSet[<span class="number">0</span>])&gt;<span class="number">0</span> ||  <span class="comment">// 极角更小    </span></span><br><span class="line">                (<span class="built_in">multiply</span>(PointSet[j],PointSet[k],PointSet[<span class="number">0</span>])==<span class="number">0</span>) &amp;&amp; <span class="comment">/* 极角相等，距离更短 */</span>        </span><br><span class="line">                <span class="built_in">dist</span>(PointSet[<span class="number">0</span>],PointSet[j])&lt;<span class="built_in">dist</span>(PointSet[<span class="number">0</span>],PointSet[k])</span><br><span class="line">               ) </span><br><span class="line">                k=j; </span><br><span class="line">        tmp=PointSet[i]; </span><br><span class="line">        PointSet[i]=PointSet[k]; </span><br><span class="line">        PointSet[k]=tmp; </span><br><span class="line">    &#125; </span><br><span class="line">    ch[<span class="number">0</span>]=PointSet[<span class="number">0</span>]; </span><br><span class="line">    ch[<span class="number">1</span>]=PointSet[<span class="number">1</span>]; </span><br><span class="line">    ch[<span class="number">2</span>]=PointSet[<span class="number">2</span>]; </span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">3</span>;i&lt;n;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">multiply</span>(PointSet[i],ch[top],ch[top<span class="number">-1</span>])&gt;=<span class="number">0</span>) </span><br><span class="line">            top--; </span><br><span class="line">        ch[++top]=PointSet[i]; </span><br><span class="line">    &#125; </span><br><span class="line">    len=top+<span class="number">1</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="10-寻找点集凸包的卷包裹法"><a href="#10-寻找点集凸包的卷包裹法" class="headerlink" title="10.寻找点集凸包的卷包裹法"></a>10.寻找点集凸包的卷包裹法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 卷包裹法求点集凸壳，参数说明同graham算法    </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ConvexClosure</span><span class="params">(POINT PointSet[],POINT ch[],<span class="type">int</span> n,<span class="type">int</span> &amp;len)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> top=<span class="number">0</span>,i,index,first; </span><br><span class="line">    <span class="type">double</span> curmax,curcos,curdis; </span><br><span class="line">    POINT tmp; </span><br><span class="line">    LINESEG l1,l2; </span><br><span class="line">    <span class="type">bool</span> use[MAXV]; </span><br><span class="line">    tmp=PointSet[<span class="number">0</span>]; </span><br><span class="line">    index=<span class="number">0</span>; </span><br><span class="line">    <span class="comment">// 选取y最小点，如果多于一个，则选取最左点 </span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span>(PointSet[i].y&lt;tmp.y||PointSet[i].y == tmp.y&amp;&amp;PointSet[i].x&lt;tmp.x) </span><br><span class="line">        &#123; </span><br><span class="line">            index=i; </span><br><span class="line">        &#125; </span><br><span class="line">        use[i]=<span class="literal">false</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    tmp=PointSet[index]; </span><br><span class="line">    first=index; </span><br><span class="line">    use[index]=<span class="literal">true</span>; </span><br><span class="line"> </span><br><span class="line">    index=<span class="number">-1</span>; </span><br><span class="line">    ch[top++]=tmp; </span><br><span class="line">    tmp.x-=<span class="number">100</span>; </span><br><span class="line">    l1.s=tmp; </span><br><span class="line">    l1.e=ch[<span class="number">0</span>]; </span><br><span class="line">    l2.s=ch[<span class="number">0</span>]; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span>(index!=first) </span><br><span class="line">    &#123; </span><br><span class="line">        curmax=<span class="number">-100</span>; </span><br><span class="line">        curdis=<span class="number">0</span>; </span><br><span class="line">        <span class="comment">// 选取与最后一条确定边夹角最小的点，即余弦值最大者 </span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++) </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">if</span>(use[i])<span class="keyword">continue</span>; </span><br><span class="line">            l2.e=PointSet[i]; </span><br><span class="line">            curcos=<span class="built_in">cosine</span>(l1,l2); <span class="comment">// 根据cos值求夹角余弦，范围在 （-1 -- 1 ） </span></span><br><span class="line">            <span class="keyword">if</span>(curcos&gt;curmax || <span class="built_in">fabs</span>(curcos-curmax)&lt;<span class="number">1e-6</span> &amp;&amp; <span class="built_in">dist</span>(l2.s,l2.e)&gt;curdis) </span><br><span class="line">            &#123; </span><br><span class="line">                curmax=curcos; </span><br><span class="line">                index=i; </span><br><span class="line">                curdis=<span class="built_in">dist</span>(l2.s,l2.e); </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">        use[first]=<span class="literal">false</span>;            <span class="comment">//清空第first个顶点标志，使最后能形成封闭的hull </span></span><br><span class="line">        use[index]=<span class="literal">true</span>; </span><br><span class="line">        ch[top++]=PointSet[index]; </span><br><span class="line">        l1.s=ch[top<span class="number">-2</span>]; </span><br><span class="line">        l1.e=ch[top<span class="number">-1</span>]; </span><br><span class="line">        l2.s=ch[top<span class="number">-1</span>]; </span><br><span class="line">    &#125; </span><br><span class="line">    len=top<span class="number">-1</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="11-判断线段是否在多边形内"><a href="#11-判断线段是否在多边形内" class="headerlink" title="11.判断线段是否在多边形内"></a>11.判断线段是否在多边形内</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************************************  </span></span><br><span class="line"><span class="comment">    判断线段是否在简单多边形内(注意：如果多边形是凸多边形，下面的算法可以化简) </span></span><br><span class="line"><span class="comment">       必要条件一：线段的两个端点都在多边形内； </span></span><br><span class="line"><span class="comment">    必要条件二：线段和多边形的所有边都不内交； </span></span><br><span class="line"><span class="comment">    用途：    1. 判断折线是否在简单多边形内 </span></span><br><span class="line"><span class="comment">            2. 判断简单多边形是否在另一个简单多边形内 </span></span><br><span class="line"><span class="comment">********************************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">LinesegInsidePolygon</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[],LINESEG l)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="comment">// 判断线端l的端点是否不都在多边形内 </span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">insidepolygon</span>(vcount,polygon,l.s)||!<span class="built_in">insidepolygon</span>(vcount,polygon,l.e)) </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    <span class="type">int</span> top=<span class="number">0</span>,i,j; </span><br><span class="line">    POINT PointSet[MAXV],tmp; </span><br><span class="line">    LINESEG s; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        s.s=polygon[i]; </span><br><span class="line">        s.e=polygon[(i+<span class="number">1</span>)%vcount]; </span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">online</span>(s,l.s)) <span class="comment">//线段l的起始端点在线段s上 </span></span><br><span class="line">            PointSet[top++]=l.s; </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">online</span>(s,l.e)) <span class="comment">//线段l的终止端点在线段s上 </span></span><br><span class="line">            PointSet[top++]=l.e; </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">online</span>(l,s.s)) <span class="comment">//线段s的起始端点在线段l上 </span></span><br><span class="line">                PointSet[top++]=s.s; </span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">online</span>(l,s.e)) <span class="comment">// 线段s的终止端点在线段l上 </span></span><br><span class="line">                PointSet[top++]=s.e; </span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">            &#123; </span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">intersect</span>(l,s)) <span class="comment">// 这个时候如果相交，肯定是内交，返回false </span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;top<span class="number">-1</span>;i++) <span class="comment">/* 冒泡排序，x坐标小的排在前面；x坐标相同者，y坐标小的排在前面 */</span> </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">for</span>(j=i+<span class="number">1</span>;j&lt;top;j++) </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">if</span>( PointSet[i].x&gt;PointSet[j].x || <span class="built_in">fabs</span>(PointSet[i].x-PointSet[j].x)&lt;EP &amp;&amp; PointSet[i].y&gt;PointSet[j].y ) </span><br><span class="line">            &#123; </span><br><span class="line">                tmp=PointSet[i]; </span><br><span class="line">                PointSet[i]=PointSet[j]; </span><br><span class="line">                PointSet[j]=tmp; </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;top<span class="number">-1</span>;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        tmp.x=(PointSet[i].x+PointSet[i+<span class="number">1</span>].x)/<span class="number">2</span>; <span class="comment">//得到两个相邻交点的中点 </span></span><br><span class="line">        tmp.y=(PointSet[i].y+PointSet[i+<span class="number">1</span>].y)/<span class="number">2</span>; </span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">insidepolygon</span>(vcount,polygon,tmp)) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="12-求简单多边形的重心"><a href="#12-求简单多边形的重心" class="headerlink" title="12.求简单多边形的重心"></a>12.求简单多边形的重心</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************************************  </span></span><br><span class="line"><span class="comment">求任意简单多边形polygon的重心 </span></span><br><span class="line"><span class="comment">需要调用下面几个函数： </span></span><br><span class="line"><span class="comment">    void AddPosPart(); 增加右边区域的面积 </span></span><br><span class="line"><span class="comment">    void AddNegPart(); 增加左边区域的面积 </span></span><br><span class="line"><span class="comment">    void AddRegion(); 增加区域面积 </span></span><br><span class="line"><span class="comment">在使用该程序时，如果把xtr,ytr,wtr,xtl,ytl,wtl设成全局变量就可以使这些函数的形式得到化简,</span></span><br><span class="line"><span class="comment">但要注意函数的声明和调用要做相应变化 </span></span><br><span class="line"><span class="comment">********************************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AddPosPart</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y, <span class="type">double</span> w, <span class="type">double</span> &amp;xtr, <span class="type">double</span> &amp;ytr, <span class="type">double</span> &amp;wtr)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">abs</span>(wtr + w)&lt;<span class="number">1e-10</span> ) <span class="keyword">return</span>; <span class="comment">// detect zero regions </span></span><br><span class="line">    xtr = ( wtr*xtr + w*x ) / ( wtr + w ); </span><br><span class="line">    ytr = ( wtr*ytr + w*y ) / ( wtr + w ); </span><br><span class="line">    wtr = w + wtr; </span><br><span class="line">    <span class="keyword">return</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AddNegPart</span><span class="params">(<span class="type">double</span> x, ouble y, <span class="type">double</span> w, <span class="type">double</span> &amp;xtl, <span class="type">double</span> &amp;ytl, <span class="type">double</span> &amp;wtl)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">abs</span>(wtl + w)&lt;<span class="number">1e-10</span> ) </span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">// detect zero regions </span></span><br><span class="line"> </span><br><span class="line">    xtl = ( wtl*xtl + w*x ) / ( wtl + w ); </span><br><span class="line">    ytl = ( wtl*ytl + w*y ) / ( wtl + w ); </span><br><span class="line">    wtl = w + wtl; </span><br><span class="line">    <span class="keyword">return</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AddRegion</span> <span class="params">( <span class="type">double</span> x1, <span class="type">double</span> y1, <span class="type">double</span> x2, <span class="type">double</span> y2, <span class="type">double</span> &amp;xtr, <span class="type">double</span> &amp;ytr, </span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="type">double</span> &amp;wtr, <span class="type">double</span> &amp;xtl, <span class="type">double</span> &amp;ytl, <span class="type">double</span> &amp;wtl )</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span> ( <span class="built_in">abs</span> (x1 - x2)&lt; <span class="number">1e-10</span> ) </span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> ( x2 &gt; x1 ) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="built_in">AddPosPart</span> ((x2+x1)/<span class="number">2</span>, y1/<span class="number">2</span>, (x2-x1) * y1,xtr,ytr,wtr); <span class="comment">/* rectangle 全局变量变化处 */</span> </span><br><span class="line">        <span class="built_in">AddPosPart</span> ((x1+x2+x2)/<span class="number">3</span>, (y1+y1+y2)/<span class="number">3</span>, (x2-x1)*(y2-y1)/<span class="number">2</span>,xtr,ytr,wtr);    </span><br><span class="line">        <span class="comment">// triangle 全局变量变化处 </span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="built_in">AddNegPart</span> ((x2+x1)/<span class="number">2</span>, y1/<span class="number">2</span>, (x2-x1) * y1,xtl,ytl,wtl);  </span><br><span class="line">        <span class="comment">// rectangle 全局变量变化处 </span></span><br><span class="line">        <span class="built_in">AddNegPart</span> ((x1+x2+x2)/<span class="number">3</span>, (y1+y1+y2)/<span class="number">3</span>, (x2-x1)*(y2-y1)/<span class="number">2</span>,xtl,ytl,wtl);  </span><br><span class="line">        <span class="comment">// triangle  全局变量变化处 </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function">POINT <span class="title">cg_simple</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> xtr,ytr,wtr,xtl,ytl,wtl;        </span><br><span class="line">    <span class="comment">//注意： 如果把xtr,ytr,wtr,xtl,ytl,wtl改成全局变量后这里要删去 </span></span><br><span class="line">    POINT p1,p2,tp; </span><br><span class="line">    xtr = ytr = wtr = <span class="number">0.0</span>; </span><br><span class="line">    xtl = ytl = wtl = <span class="number">0.0</span>; </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        p1=polygon[i]; </span><br><span class="line">        p2=polygon[(i+<span class="number">1</span>)%vcount]; </span><br><span class="line">        <span class="built_in">AddRegion</span>(p1.x,p1.y,p2.x,p2.y,xtr,ytr,wtr,xtl,ytl,wtl); <span class="comment">//全局变量变化处 </span></span><br><span class="line">    &#125; </span><br><span class="line">    tp.x = (wtr*xtr + wtl*xtl) / (wtr + wtl); </span><br><span class="line">    tp.y = (wtr*ytr + wtl*ytl) / (wtr + wtl); </span><br><span class="line">    <span class="keyword">return</span> tp; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="13-求凸多边形的重心"><a href="#13-求凸多边形的重心" class="headerlink" title="13.求凸多边形的重心"></a>13.求凸多边形的重心</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求凸多边形的重心,要求输入多边形按逆时针排序 </span></span><br><span class="line"><span class="function">POINT <span class="title">gravitycenter</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT tp; </span><br><span class="line">    <span class="type">double</span> x,y,s,x0,y0,cs,k; </span><br><span class="line">    x=<span class="number">0</span>;y=<span class="number">0</span>;s=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;vcount<span class="number">-1</span>;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        x0=(polygon[<span class="number">0</span>].x+polygon[i].x+polygon[i+<span class="number">1</span>].x)/<span class="number">3</span>; </span><br><span class="line">        y0=(polygon[<span class="number">0</span>].y+polygon[i].y+polygon[i+<span class="number">1</span>].y)/<span class="number">3</span>; <span class="comment">//求当前三角形的重心 </span></span><br><span class="line">        cs=<span class="built_in">multiply</span>(polygon[i],polygon[i+<span class="number">1</span>],polygon[<span class="number">0</span>])/<span class="number">2</span>; </span><br><span class="line">        <span class="comment">//三角形面积可以直接利用该公式求解 </span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">abs</span>(s)&lt;<span class="number">1e-20</span>) </span><br><span class="line">        &#123; </span><br><span class="line">            x=x0;y=y0;s+=cs;<span class="keyword">continue</span>; </span><br><span class="line">        &#125; </span><br><span class="line">        k=cs/s; <span class="comment">//求面积比例 </span></span><br><span class="line">        x=(x+k*x0)/(<span class="number">1</span>+k); </span><br><span class="line">        y=(y+k*y0)/(<span class="number">1</span>+k); </span><br><span class="line">        s += cs; </span><br><span class="line">    &#125; </span><br><span class="line">    tp.x=x; </span><br><span class="line">    tp.y=y; </span><br><span class="line">    <span class="keyword">return</span> tp; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="14-求肯定在给定多边形内的一个点"><a href="#14-求肯定在给定多边形内的一个点" class="headerlink" title="14.求肯定在给定多边形内的一个点"></a>14.求肯定在给定多边形内的一个点</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/************************************************</span></span><br><span class="line"><span class="comment">给定一简单多边形，找出一个肯定在该多边形内的点 </span></span><br><span class="line"><span class="comment">定理1    ：每个多边形至少有一个凸顶点 </span></span><br><span class="line"><span class="comment">定理2    ：顶点数&gt;=4的简单多边形至少有一条对角线 </span></span><br><span class="line"><span class="comment">结论    ： x坐标最大，最小的点肯定是凸顶点 </span></span><br><span class="line"><span class="comment">    y坐标最大，最小的点肯定是凸顶点            </span></span><br><span class="line"><span class="comment">************************************************/</span> </span><br><span class="line"><span class="function">POINT <span class="title">a_point_insidepoly</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[])</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT v,a,b,r; </span><br><span class="line">    <span class="type">int</span> i,index; </span><br><span class="line">    v=polygon[<span class="number">0</span>]; </span><br><span class="line">    index=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;vcount;i++) <span class="comment">//寻找一个凸顶点 </span></span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span>(polygon[i].y&lt;v.y) </span><br><span class="line">        &#123; </span><br><span class="line">            v=polygon[i]; </span><br><span class="line">            index=i; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    a=polygon[(index<span class="number">-1</span>+vcount)%vcount]; <span class="comment">//得到v的前一个顶点 </span></span><br><span class="line">    b=polygon[(index+<span class="number">1</span>)%vcount]; <span class="comment">//得到v的后一个顶点 </span></span><br><span class="line">    POINT tri[<span class="number">3</span>],q; </span><br><span class="line">    tri[<span class="number">0</span>]=a;tri[<span class="number">1</span>]=v;tri[<span class="number">2</span>]=b; </span><br><span class="line">    <span class="type">double</span> md=INF; </span><br><span class="line">    <span class="type">int</span> in1=index; </span><br><span class="line">    <span class="type">bool</span> bin=<span class="literal">false</span>; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount;i++) <span class="comment">//寻找在三角形avb内且离顶点v最近的顶点q </span></span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">if</span>(i == index)<span class="keyword">continue</span>; </span><br><span class="line">        <span class="keyword">if</span>(i == (index<span class="number">-1</span>+vcount)%vcount)<span class="keyword">continue</span>; </span><br><span class="line">        <span class="keyword">if</span>(i == (index+<span class="number">1</span>)%vcount)<span class="keyword">continue</span>; </span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">InsideConvexPolygon</span>(<span class="number">3</span>,tri,polygon[i]))<span class="keyword">continue</span>; </span><br><span class="line">        bin=<span class="literal">true</span>; </span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">dist</span>(v,polygon[i])&lt;md) </span><br><span class="line">        &#123; </span><br><span class="line">            q=polygon[i]; </span><br><span class="line">            md=<span class="built_in">dist</span>(v,q); </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span>(!bin) <span class="comment">//没有顶点在三角形avb内，返回线段ab中点 </span></span><br><span class="line">    &#123; </span><br><span class="line">        r.x=(a.x+b.x)/<span class="number">2</span>; </span><br><span class="line">        r.y=(a.y+b.y)/<span class="number">2</span>; </span><br><span class="line">        <span class="keyword">return</span> r; </span><br><span class="line">    &#125; </span><br><span class="line">    r.x=(v.x+q.x)/<span class="number">2</span>; <span class="comment">//返回线段vq的中点 </span></span><br><span class="line">    r.y=(v.y+q.y)/<span class="number">2</span>; </span><br><span class="line">    <span class="keyword">return</span> r; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="15-求从多边形外一点出发到该多边形的切线"><a href="#15-求从多边形外一点出发到该多边形的切线" class="headerlink" title="15.求从多边形外一点出发到该多边形的切线"></a>15.求从多边形外一点出发到该多边形的切线</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*********************************************************************************************</span></span><br><span class="line"><span class="comment">求从多边形外一点p出发到一个简单多边形的切线,如果存在返回切点,其中rp点是右切点,lp是左切点 </span></span><br><span class="line"><span class="comment">注意：p点一定要在多边形外 ,输入顶点序列是逆时针排列 </span></span><br><span class="line"><span class="comment">原 理：    如果点在多边形内肯定无切线;凸多边形有唯一的两个切点,凹多边形就可能有多于两个的切点; </span></span><br><span class="line"><span class="comment">        如果polygon是凸多边形，切点只有两个只要找到就可以,可以化简此算法 </span></span><br><span class="line"><span class="comment">        如果是凹多边形还有一种算法可以求解:先求凹多边形的凸包,然后求凸包的切线 </span></span><br><span class="line"><span class="comment">********************************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pointtangentpoly</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[],POINT p,POINT &amp;rp,POINT &amp;lp)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    LINESEG ep,en; </span><br><span class="line">    <span class="type">bool</span> blp,bln; </span><br><span class="line">    rp=polygon[<span class="number">0</span>]; </span><br><span class="line">    lp=polygon[<span class="number">0</span>]; </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        ep.s=polygon[(i+vcount<span class="number">-1</span>)%vcount]; </span><br><span class="line">        ep.e=polygon[i]; </span><br><span class="line">        en.s=polygon[i]; </span><br><span class="line">        en.e=polygon[(i+<span class="number">1</span>)%vcount]; </span><br><span class="line">        blp=<span class="built_in">multiply</span>(ep.e,p,ep.s)&gt;=<span class="number">0</span>;                <span class="comment">// p is to the left of pre edge </span></span><br><span class="line">        bln=<span class="built_in">multiply</span>(en.e,p,en.s)&gt;=<span class="number">0</span>;                <span class="comment">// p is to the left of next edge </span></span><br><span class="line">        <span class="keyword">if</span>(!blp&amp;&amp;bln) </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">multiply</span>(polygon[i],rp,p)&gt;<span class="number">0</span>)           <span class="comment">// polygon[i] is above rp </span></span><br><span class="line">            rp=polygon[i]; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span>(blp&amp;&amp;!bln) </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">multiply</span>(lp,polygon[i],p)&gt;<span class="number">0</span>)           <span class="comment">// polygon[i] is below lp </span></span><br><span class="line">            lp=polygon[i]; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> ; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="16-判断多边形的核是否存在"><a href="#16-判断多边形的核是否存在" class="headerlink" title="16.判断多边形的核是否存在"></a>16.判断多边形的核是否存在</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果多边形polygon的核存在，返回true，返回核上的一点p.顶点按逆时针方向输入  </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">core_exist</span><span class="params">(<span class="type">int</span> vcount,POINT polygon[],POINT &amp;p)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> i,j,k; </span><br><span class="line">    LINESEG l; </span><br><span class="line">    LINE lineset[MAXV]; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        lineset[i]=<span class="built_in">makeline</span>(polygon[i],polygon[(i+<span class="number">1</span>)%vcount]); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;vcount;i++) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;vcount;j++) </span><br><span class="line">        &#123; </span><br><span class="line">            <span class="keyword">if</span>(i == j)<span class="keyword">continue</span>; </span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">lineintersect</span>(lineset[i],lineset[j],p)) </span><br><span class="line">            &#123; </span><br><span class="line">                <span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;vcount;k++) </span><br><span class="line">                &#123; </span><br><span class="line">                    l.s=polygon[k]; </span><br><span class="line">                    l.e=polygon[(k+<span class="number">1</span>)%vcount]; </span><br><span class="line">                    <span class="keyword">if</span>(<span class="built_in">multiply</span>(p,l.e,l.s)&gt;<span class="number">0</span>)      </span><br><span class="line">                    <span class="comment">//多边形顶点按逆时针方向排列，核肯定在每条边的左侧或边上 </span></span><br><span class="line">                    <span class="keyword">break</span>; </span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">if</span>(k == vcount)             <span class="comment">//找到了一个核上的点 </span></span><br><span class="line">                <span class="keyword">break</span>; </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span>(j&lt;vcount) <span class="keyword">break</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span>(i&lt;vcount) </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h2 id="四-圆的基本运算"><a href="#四-圆的基本运算" class="headerlink" title="四.圆的基本运算"></a>四.圆的基本运算</h2><h3 id="1-点是否在圆内"><a href="#1-点是否在圆内" class="headerlink" title="1.点是否在圆内"></a>1.点是否在圆内</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******************************************************************************</span></span><br><span class="line"><span class="comment">返回值    ： 点p在圆内(包括边界)时，返回true </span></span><br><span class="line"><span class="comment">用途    ： 因为圆为凸集，所以判断点集，折线，多边形是否在圆内时，</span></span><br><span class="line"><span class="comment">    只需要逐一判断点是否在圆内即可。 </span></span><br><span class="line"><span class="comment">*******************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">point_in_circle</span><span class="params">(POINT o,<span class="type">double</span> r,POINT p)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> d2=(p.x-o.x)*(p.x-o.x)+(p.y-o.y)*(p.y-o.y); </span><br><span class="line">    <span class="type">double</span> r2=r*r; </span><br><span class="line">    <span class="keyword">return</span> d2&lt;r2||<span class="built_in">abs</span>(d2-r2)&lt;EP; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="2-求不共线的三点所确定的圆"><a href="#2-求不共线的三点所确定的圆" class="headerlink" title="2.求不共线的三点所确定的圆"></a>2.求不共线的三点所确定的圆</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******************************************************************************</span></span><br><span class="line"><span class="comment">用 途    ：求不共线的三点确定一个圆 </span></span><br><span class="line"><span class="comment">输 入    ：三个点p1,p2,p3 </span></span><br><span class="line"><span class="comment">返回值    ：如果三点共线，返回false；反之，返回true。圆心由q返回，半径由r返回 </span></span><br><span class="line"><span class="comment">*******************************************************************************/</span> </span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cocircle</span><span class="params">(POINT p1,POINT p2,POINT p3,POINT &amp;q,<span class="type">double</span> &amp;r)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> x12=p2.x-p1.x; </span><br><span class="line">    <span class="type">double</span> y12=p2.y-p1.y; </span><br><span class="line">    <span class="type">double</span> x13=p3.x-p1.x; </span><br><span class="line">    <span class="type">double</span> y13=p3.y-p1.y; </span><br><span class="line">    <span class="type">double</span> z2=x12*(p1.x+p2.x)+y12*(p1.y+p2.y); </span><br><span class="line">    <span class="type">double</span> z3=x13*(p1.x+p3.x)+y13*(p1.y+p3.y); </span><br><span class="line">    <span class="type">double</span> d=<span class="number">2.0</span>*(x12*(p3.y-p2.y)-y12*(p3.x-p2.x)); </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(d)&lt;EP) <span class="comment">//共线，圆不存在 </span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    q.x=(y13*z2-y12*z3)/d; </span><br><span class="line">    q.y=(x12*z3-x13*z2)/d; </span><br><span class="line">    r=<span class="built_in">dist</span>(p1,q); </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">line_circle</span><span class="params">(LINE l,POINT o,<span class="type">double</span> r,POINT &amp;p1,POINT &amp;p2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h2 id="矩形的基本运算"><a href="#矩形的基本运算" class="headerlink" title="矩形的基本运算"></a>矩形的基本运算</h2><h3 id="1-已知矩形三点坐标，求第4点坐标"><a href="#1-已知矩形三点坐标，求第4点坐标" class="headerlink" title="1.已知矩形三点坐标，求第4点坐标"></a>1.已知矩形三点坐标，求第4点坐标</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">说明：因为矩形的特殊性，常用算法可以化简： </span></span><br><span class="line"><span class="comment">1.判断矩形是否包含点 </span></span><br><span class="line"><span class="comment">只要判断该点的横坐标和纵坐标是否夹在矩形的左右边和上下边之间。 </span></span><br><span class="line"><span class="comment">2.判断线段、折线、多边形是否在矩形中 </span></span><br><span class="line"><span class="comment">因为矩形是个凸集，所以只要判断所有端点是否都在矩形中就可以了。 </span></span><br><span class="line"><span class="comment">3.判断圆是否在矩形中 </span></span><br><span class="line"><span class="comment">圆在矩形中的充要条件是：圆心在矩形中且圆的半径小于等于圆心到矩形四边的距离的最小值。 </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="comment">// 已知矩形的三个顶点(a,b,c)，计算第四个顶点d的坐标. 注意：已知的三个顶点可以是无序的 </span></span><br><span class="line"><span class="function">POINT <span class="title">rect4th</span><span class="params">(POINT a,POINT b,POINT c)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT d; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(<span class="built_in">dotmultiply</span>(a,b,c))&lt;EP) <span class="comment">// 说明c点是直角拐角处 </span></span><br><span class="line">    &#123; </span><br><span class="line">        d.x=a.x+b.x-c.x; </span><br><span class="line">        d.y=a.y+b.y-c.y; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(<span class="built_in">dotmultiply</span>(a,c,b))&lt;EP) <span class="comment">// 说明b点是直角拐角处 </span></span><br><span class="line">    &#123; </span><br><span class="line">        d.x=a.x+c.x-b.x; </span><br><span class="line">        d.y=a.y+c.y-b.x; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(<span class="built_in">dotmultiply</span>(c,b,a))&lt;EP) <span class="comment">// 说明a点是直角拐角处 </span></span><br><span class="line">    &#123; </span><br><span class="line">        d.x=c.x+b.x-a.x; </span><br><span class="line">        d.y=c.y+b.y-a.y; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> d; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h2 id="五-常用算法的描述"><a href="#五-常用算法的描述" class="headerlink" title="五.常用算法的描述"></a>五.常用算法的描述</h2><h2 id="六-补充"><a href="#六-补充" class="headerlink" title="六.补充"></a>六.补充</h2><h3 id="1-两圆关系"><a href="#1-两圆关系" class="headerlink" title="1.两圆关系"></a>1.两圆关系</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 两圆： </span></span><br><span class="line"><span class="comment">相离： return 1； </span></span><br><span class="line"><span class="comment">外切： return 2； </span></span><br><span class="line"><span class="comment">相交： return 3； </span></span><br><span class="line"><span class="comment">内切： return 4； </span></span><br><span class="line"><span class="comment">内含： return 5； </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">CircleRelation</span><span class="params">(POINT p1, <span class="type">double</span> r1, POINT p2, <span class="type">double</span> r2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> d = <span class="built_in">sqrt</span>( (p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y) ); </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">fabs</span>(d-r1-r2) &lt; EP ) <span class="comment">// 必须保证前两个if先被判定！ </span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>; </span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">fabs</span>(d-<span class="built_in">fabs</span>(r1-r2)) &lt; EP ) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span>; </span><br><span class="line">    <span class="keyword">if</span>( d &gt; r1+r2 ) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">if</span>( d &lt; <span class="built_in">fabs</span>(r1-r2) ) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>; </span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">fabs</span>(r1-r2) &lt; d &amp;&amp; d &lt; r1+r2 ) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// indicate an error! </span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="2-判断圆是否在矩形内"><a href="#2-判断圆是否在矩形内" class="headerlink" title="2.判断圆是否在矩形内"></a>2.判断圆是否在矩形内</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断圆是否在矩形内：</span></span><br><span class="line"><span class="comment">// 判定圆是否在矩形内，是就返回true（设矩形水平，且其四个顶点由左上开始按顺时针排列） </span></span><br><span class="line"><span class="comment">// 调用ptoldist函数，在第4页 </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">CircleRecRelation</span><span class="params">(POINT pc, <span class="type">double</span> r, POINT pr1, POINT pr2, POINT pr3, POINT pr4)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">if</span>( pr1.x &lt; pc.x &amp;&amp; pc.x &lt; pr2.x &amp;&amp; pr3.y &lt; pc.y &amp;&amp; pc.y &lt; pr2.y ) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="function">LINESEG <span class="title">line1</span><span class="params">(pr1, pr2)</span></span>; </span><br><span class="line">        <span class="function">LINESEG <span class="title">line2</span><span class="params">(pr2, pr3)</span></span>; </span><br><span class="line">        <span class="function">LINESEG <span class="title">line3</span><span class="params">(pr3, pr4)</span></span>; </span><br><span class="line">        <span class="function">LINESEG <span class="title">line4</span><span class="params">(pr4, pr1)</span></span>; </span><br><span class="line">        <span class="keyword">if</span>( r&lt;<span class="built_in">ptoldist</span>(pc,line1) &amp;&amp; r&lt;<span class="built_in">ptoldist</span>(pc,line2) &amp;&amp;    r&lt;<span class="built_in">ptoldist</span>(pc,line3) &amp;&amp; r&lt;<span class="built_in">ptoldist</span>(pc,line4) ) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="3-点到平面的距离"><a href="#3-点到平面的距离" class="headerlink" title="3.点到平面的距离"></a>3.点到平面的距离</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点到平面的距离,平面用一般式表示ax+by+cz+d=0 </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">P2planeDist</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y, <span class="type">double</span> z, <span class="type">double</span> a, <span class="type">double</span> b, <span class="type">double</span> c, <span class="type">double</span> d)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fabs</span>(a*x+b*y+c*z+d) / <span class="built_in">sqrt</span>(a*a+b*b+c*c); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="4-点是否在直线同侧"><a href="#4-点是否在直线同侧" class="headerlink" title="4.点是否在直线同侧"></a>4.点是否在直线同侧</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//两个点是否在直线同侧，是则返回true </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">SameSide</span><span class="params">(POINT p1, POINT p2, LINE line)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> (line.a * p1.x + line.b * p1.y + line.c) * </span><br><span class="line">    (line.a * p2.x + line.b * p2.y + line.c) &gt; <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-镜面反射线"><a href="#5-镜面反射线" class="headerlink" title="5.镜面反射线"></a>5.镜面反射线</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 已知入射线、镜面，求反射线。 </span></span><br><span class="line"><span class="comment">// a1,b1,c1为镜面直线方程(a1 x + b1 y + c1 = 0 ,下同)系数;  </span></span><br><span class="line"><span class="comment">//a2,b2,c2为入射光直线方程系数;  </span></span><br><span class="line"><span class="comment">//a,b,c为反射光直线方程系数. </span></span><br><span class="line"><span class="comment">// 光是有方向的，使用时注意：入射光向量:&lt;-b2,a2&gt;；反射光向量:&lt;b,-a&gt;. </span></span><br><span class="line"><span class="comment">// 不要忘记结果中可能会有&quot;negative zeros&quot; </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reflect</span><span class="params">(<span class="type">double</span> a1,<span class="type">double</span> b1,<span class="type">double</span> c1,<span class="type">double</span> a2,<span class="type">double</span> b2,<span class="type">double</span> c2,<span class="type">double</span> &amp;a,<span class="type">double</span> &amp;b,<span class="type">double</span> &amp;c)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> n,m; </span><br><span class="line">    <span class="type">double</span> tpb,tpa; </span><br><span class="line">    tpb=b1*b2+a1*a2; </span><br><span class="line">    tpa=a2*b1-a1*b2; </span><br><span class="line">    m=(tpb*b1+tpa*a1)/(b1*b1+a1*a1); </span><br><span class="line">    n=(tpa*b1-tpb*a1)/(b1*b1+a1*a1); </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(a1*b2-a2*b1)&lt;<span class="number">1e-20</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        a=a2;b=b2;c=c2; </span><br><span class="line">        <span class="keyword">return</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="type">double</span> xx,yy; <span class="comment">//(xx,yy)是入射线与镜面的交点。 </span></span><br><span class="line">    xx=(b1*c2-b2*c1)/(a1*b2-a2*b1); </span><br><span class="line">    yy=(a2*c1-a1*c2)/(a1*b2-a2*b1); </span><br><span class="line">    a=n; </span><br><span class="line">    b=-m; </span><br><span class="line">    c=m*yy-xx*n; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="6-矩形包含"><a href="#6-矩形包含" class="headerlink" title="6.矩形包含"></a>6.矩形包含</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 矩形2（C，D）是否在1（A，B）内</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">r2inr1</span><span class="params">(<span class="type">double</span> A,<span class="type">double</span> B,<span class="type">double</span> C,<span class="type">double</span> D)</span>  </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> X,Y,L,K,DMax; </span><br><span class="line">    <span class="keyword">if</span> (A &lt; B) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="type">double</span> tmp = A; </span><br><span class="line">        A = B; </span><br><span class="line">        B = tmp; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (C &lt; D) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="type">double</span> tmp = C; </span><br><span class="line">        C = D; </span><br><span class="line">        D = tmp; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (A &gt; C &amp;&amp; B &gt; D)                 <span class="comment">// trivial case  </span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">if</span> (D &gt;= B) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123; </span><br><span class="line">            X = <span class="built_in">sqrt</span>(A * A + B * B);         <span class="comment">// outer rectangle&#x27;s diagonal  </span></span><br><span class="line">            Y = <span class="built_in">sqrt</span>(C * C + D * D);         <span class="comment">// inner rectangle&#x27;s diagonal  </span></span><br><span class="line">            <span class="keyword">if</span> (Y &lt; B) <span class="comment">// check for marginal conditions </span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// the inner rectangle can freely rotate inside </span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                <span class="keyword">if</span> (Y &gt; X) </span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">                <span class="keyword">else</span> </span><br><span class="line">                &#123; </span><br><span class="line">                    L = (B - <span class="built_in">sqrt</span>(Y * Y - A * A)) / <span class="number">2</span>; </span><br><span class="line">                    K = (A - <span class="built_in">sqrt</span>(Y * Y - B * B)) / <span class="number">2</span>; </span><br><span class="line">                    DMax = <span class="built_in">sqrt</span>(L * L + K * K); </span><br><span class="line">                    <span class="keyword">if</span> (D &gt;= DMax) </span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">                    <span class="keyword">else</span> </span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">                &#125; </span><br><span class="line">        &#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="7-两圆交点"><a href="#7-两圆交点" class="headerlink" title="7.两圆交点"></a>7.两圆交点</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两圆已经相交（相切） </span></span><br><span class="line"><span class="function"><span class="type">void</span>  <span class="title">c2point</span><span class="params">(POINT p1,<span class="type">double</span> r1,POINT p2,<span class="type">double</span> r2,POINT &amp;rp1,POINT &amp;rp2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> a,b,r; </span><br><span class="line">    a=p2.x-p1.x; </span><br><span class="line">    b=p2.y-p1.y; </span><br><span class="line">    r=(a*a+b*b+r1*r1-r2*r2)/<span class="number">2</span>; </span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">0</span>&amp;&amp;b!=<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        rp1.y=rp2.y=r/b; </span><br><span class="line">        rp1.x=<span class="built_in">sqrt</span>(r1*r1-rp1.y*rp1.y); </span><br><span class="line">        rp2.x=-rp1.x; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a!=<span class="number">0</span>&amp;&amp;b==<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        rp1.x=rp2.x=r/a; </span><br><span class="line">        rp1.y=<span class="built_in">sqrt</span>(r1*r1-rp1.x*rp2.x); </span><br><span class="line">        rp2.y=-rp1.y; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a!=<span class="number">0</span>&amp;&amp;b!=<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="type">double</span> delta; </span><br><span class="line">        delta=b*b*r*r-(a*a+b*b)*(r*r-r1*r1*a*a); </span><br><span class="line">        rp1.y=(b*r+<span class="built_in">sqrt</span>(delta))/(a*a+b*b); </span><br><span class="line">        rp2.y=(b*r-<span class="built_in">sqrt</span>(delta))/(a*a+b*b); </span><br><span class="line">        rp1.x=(r-b*rp1.y)/a; </span><br><span class="line">        rp2.x=(r-b*rp2.y)/a; </span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">    rp1.x+=p1.x; </span><br><span class="line">    rp1.y+=p1.y; </span><br><span class="line">    rp2.x+=p1.x; </span><br><span class="line">    rp2.y+=p1.y; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="8-两圆公共面积"><a href="#8-两圆公共面积" class="headerlink" title="8.两圆公共面积"></a>8.两圆公共面积</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 必须保证相交 </span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">c2area</span><span class="params">(POINT p1,<span class="type">double</span> r1,POINT p2,<span class="type">double</span> r2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT rp1,rp2; </span><br><span class="line">    <span class="built_in">c2point</span>(p1,r1,p2,r2,rp1,rp2); </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(r1&gt;r2) <span class="comment">//保证r2&gt;r1 </span></span><br><span class="line">    &#123; </span><br><span class="line">        <span class="built_in">swap</span>(p1,p2); </span><br><span class="line">        <span class="built_in">swap</span>(r1,r2); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="type">double</span> a,b,rr; </span><br><span class="line">    a=p1.x-p2.x; </span><br><span class="line">    b=p1.y-p2.y; </span><br><span class="line">    rr=<span class="built_in">sqrt</span>(a*a+b*b); </span><br><span class="line"> </span><br><span class="line">    <span class="type">double</span> dx1,dy1,dx2,dy2; </span><br><span class="line">    <span class="type">double</span> sita1,sita2; </span><br><span class="line">    dx1=rp1.x-p1.x; </span><br><span class="line">    dy1=rp1.y-p1.y; </span><br><span class="line">    dx2=rp2.x-p1.x; </span><br><span class="line">    dy2=rp2.y-p1.y; </span><br><span class="line">    sita1=<span class="built_in">acos</span>((dx1*dx2+dy1*dy2)/r1/r1); </span><br><span class="line"> </span><br><span class="line">    dx1=rp1.x-p2.x; </span><br><span class="line">    dy1=rp1.y-p2.y; </span><br><span class="line">    dx2=rp2.x-p2.x; </span><br><span class="line">    dy2=rp2.y-p2.y; </span><br><span class="line">    sita2=<span class="built_in">acos</span>((dx1*dx2+dy1*dy2)/r2/r2); </span><br><span class="line">    <span class="type">double</span> s=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">if</span>(rr&lt;r2)<span class="comment">//相交弧为优弧 </span></span><br><span class="line">        s=r1*r1*(PI-sita1/<span class="number">2</span>+<span class="built_in">sin</span>(sita1)/<span class="number">2</span>)+r2*r2*(sita2-<span class="built_in">sin</span>(sita2))/<span class="number">2</span>; </span><br><span class="line">    <span class="keyword">else</span><span class="comment">//相交弧为劣弧 </span></span><br><span class="line">        s=(r1*r1*(sita1-<span class="built_in">sin</span>(sita1))+r2*r2*(sita2-<span class="built_in">sin</span>(sita2)))/<span class="number">2</span>; </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> s; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="9-圆和直线关系"><a href="#9-圆和直线关系" class="headerlink" title="9.圆和直线关系"></a>9.圆和直线关系</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//0----相离 1----相切 2----相交 </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">clpoint</span><span class="params">(POINT p,<span class="type">double</span> r,<span class="type">double</span> a,<span class="type">double</span> b,<span class="type">double</span> c,POINT &amp;rp1,POINT &amp;rp2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>; </span><br><span class="line"> </span><br><span class="line">    c=c+a*p.x+b*p.y; </span><br><span class="line">    <span class="type">double</span> tmp; </span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">0</span>&amp;&amp;b!=<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        tmp=-c/b; </span><br><span class="line">        <span class="keyword">if</span>(r*r&lt;tmp*tmp) </span><br><span class="line">            res=<span class="number">0</span>; </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(r*r==tmp*tmp) </span><br><span class="line">        &#123; </span><br><span class="line">            res=<span class="number">1</span>; </span><br><span class="line">            rp1.y=tmp; </span><br><span class="line">            rp1.x=<span class="number">0</span>; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123; </span><br><span class="line">            res=<span class="number">2</span>; </span><br><span class="line">            rp1.y=rp2.y=tmp; </span><br><span class="line">            rp1.x=<span class="built_in">sqrt</span>(r*r-tmp*tmp); </span><br><span class="line">            rp2.x=-rp1.x; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a!=<span class="number">0</span>&amp;&amp;b==<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        tmp=-c/a; </span><br><span class="line">        <span class="keyword">if</span>(r*r&lt;tmp*tmp) </span><br><span class="line">            res=<span class="number">0</span>; </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(r*r==tmp*tmp) </span><br><span class="line">        &#123; </span><br><span class="line">            res=<span class="number">1</span>; </span><br><span class="line">            rp1.x=tmp; </span><br><span class="line">            rp1.y=<span class="number">0</span>; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123; </span><br><span class="line">            res=<span class="number">2</span>; </span><br><span class="line">            rp1.x=rp2.x=tmp; </span><br><span class="line">            rp1.y=<span class="built_in">sqrt</span>(r*r-tmp*tmp); </span><br><span class="line">            rp2.y=-rp1.y; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a!=<span class="number">0</span>&amp;&amp;b!=<span class="number">0</span>) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="type">double</span> delta; </span><br><span class="line">        delta=b*b*c*c-(a*a+b*b)*(c*c-a*a*r*r); </span><br><span class="line">        <span class="keyword">if</span>(delta&lt;<span class="number">0</span>) </span><br><span class="line">            res=<span class="number">0</span>; </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(delta==<span class="number">0</span>) </span><br><span class="line">        &#123; </span><br><span class="line">            res=<span class="number">1</span>; </span><br><span class="line">            rp1.y=-b*c/(a*a+b*b); </span><br><span class="line">            rp1.x=(-c-b*rp1.y)/a; </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">        &#123; </span><br><span class="line">            res=<span class="number">2</span>; </span><br><span class="line">            rp1.y=(-b*c+<span class="built_in">sqrt</span>(delta))/(a*a+b*b); </span><br><span class="line">            rp2.y=(-b*c-<span class="built_in">sqrt</span>(delta))/(a*a+b*b); </span><br><span class="line">            rp1.x=(-c-b*rp1.y)/a; </span><br><span class="line">            rp2.x=(-c-b*rp2.y)/a; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    rp1.x+=p.x; </span><br><span class="line">    rp1.y+=p.y; </span><br><span class="line">    rp2.x+=p.x; </span><br><span class="line">    rp2.y+=p.y; </span><br><span class="line">    <span class="keyword">return</span> res; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="10-内切圆"><a href="#10-内切圆" class="headerlink" title="10.内切圆"></a>10.内切圆</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">incircle</span><span class="params">(POINT p1,POINT p2,POINT p3,POINT &amp;rp,<span class="type">double</span> &amp;r)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> dx31,dy31,dx21,dy21,d31,d21,a1,b1,c1; </span><br><span class="line">    dx31=p3.x-p1.x; </span><br><span class="line">    dy31=p3.y-p1.y; </span><br><span class="line">    dx21=p2.x-p1.x; </span><br><span class="line">    dy21=p2.y-p1.y; </span><br><span class="line"> </span><br><span class="line">    d31=<span class="built_in">sqrt</span>(dx31*dx31+dy31*dy31); </span><br><span class="line">    d21=<span class="built_in">sqrt</span>(dx21*dx21+dy21*dy21); </span><br><span class="line">    a1=dx31*d21-dx21*d31; </span><br><span class="line">    b1=dy31*d21-dy21*d31; </span><br><span class="line">    c1=a1*p1.x+b1*p1.y; </span><br><span class="line"> </span><br><span class="line">    <span class="type">double</span> dx32,dy32,dx12,dy12,d32,d12,a2,b2,c2; </span><br><span class="line">    dx32=p3.x-p2.x; </span><br><span class="line">    dy32=p3.y-p2.y; </span><br><span class="line">    dx12=-dx21; </span><br><span class="line">    dy12=-dy21; </span><br><span class="line"> </span><br><span class="line">    d32=<span class="built_in">sqrt</span>(dx32*dx32+dy32*dy32); </span><br><span class="line">    d12=d21; </span><br><span class="line">    a2=dx12*d32-dx32*d12; </span><br><span class="line">    b2=dy12*d32-dy32*d12; </span><br><span class="line">    c2=a2*p2.x+b2*p2.y; </span><br><span class="line"> </span><br><span class="line">    rp.x=(c1*b2-c2*b1)/(a1*b2-a2*b1); </span><br><span class="line">    rp.y=(c2*a1-c1*a2)/(a1*b2-a2*b1); </span><br><span class="line">    r=<span class="built_in">fabs</span>(dy21*rp.x-dx21*rp.y+dx21*p1.y-dy21*p1.x)/d21; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="11-求切点"><a href="#11-求切点" class="headerlink" title="11.求切点"></a>11.求切点</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// p---圆心坐标， r---圆半径， sp---圆外一点， rp1,rp2---切点坐标 </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cutpoint</span><span class="params">(POINT p,<span class="type">double</span> r,POINT sp,POINT &amp;rp1,POINT &amp;rp2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    POINT p2; </span><br><span class="line">    p2.x=(p.x+sp.x)/<span class="number">2</span>; </span><br><span class="line">    p2.y=(p.y+sp.y)/<span class="number">2</span>; </span><br><span class="line"> </span><br><span class="line">    <span class="type">double</span> dx2,dy2,r2; </span><br><span class="line">    dx2=p2.x-p.x; </span><br><span class="line">    dy2=p2.y-p.y; </span><br><span class="line">    r2=<span class="built_in">sqrt</span>(dx2*dx2+dy2*dy2); </span><br><span class="line">    <span class="built_in">c2point</span>(p,r,p2,r2,rp1,rp2); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="12-线段的左右旋"><a href="#12-线段的左右旋" class="headerlink" title="12.线段的左右旋"></a>12.线段的左右旋</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* l2在l1的左/右方向（l1为基准线） </span></span><br><span class="line"><span class="comment">返回    0    ： 重合； </span></span><br><span class="line"><span class="comment">返回    1    ： 右旋； </span></span><br><span class="line"><span class="comment">返回    –1 ： 左旋； </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">rotat</span><span class="params">(LINESEG l1,LINESEG l2)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">double</span> dx1,dx2,dy1,dy2; </span><br><span class="line">    dx1=l1.s.x-l1.e.x; </span><br><span class="line">    dy1=l1.s.y-l1.e.y; </span><br><span class="line">    dx2=l2.s.x-l2.e.x; </span><br><span class="line">    dy2=l2.s.y-l2.e.y; </span><br><span class="line"> </span><br><span class="line">    <span class="type">double</span> d; </span><br><span class="line">    d=dx1*dy2-dx2*dy1; </span><br><span class="line">    <span class="keyword">if</span>(d==<span class="number">0</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(d&gt;<span class="number">0</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="13-公式"><a href="#13-公式" class="headerlink" title="13.公式"></a>13.公式</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">公式： </span></span><br><span class="line"><span class="comment">球坐标公式： </span></span><br><span class="line"><span class="comment">直角坐标为 P(x, y, z) 时，对应的球坐标是(rsinφcosθ, rsinφsinθ, rcosφ),其中φ是向量OP与Z轴的夹角，范围[0，π]；是OP在XOY面上的投影到X轴的旋角，范围[0，2π]  </span></span><br><span class="line"><span class="comment">直线的一般方程转化成向量方程： </span></span><br><span class="line"><span class="comment">ax+by+c=0 </span></span><br><span class="line"><span class="comment">x-x0     y-y0 </span></span><br><span class="line"><span class="comment">   ------ = ------- // (x0,y0)为直线上一点，m,n为向量 </span></span><br><span class="line"><span class="comment">m        n </span></span><br><span class="line"><span class="comment">转换关系： </span></span><br><span class="line"><span class="comment">a=n；b=-m；c=m·y0-n·x0； </span></span><br><span class="line"><span class="comment">m=-b; n=a; </span></span><br><span class="line"><span class="comment">三点平面方程： </span></span><br><span class="line"><span class="comment">三点为P1，P2，P3 </span></span><br><span class="line"><span class="comment">设向量  M1=P2-P1; M2=P3-P1; </span></span><br><span class="line"><span class="comment">平面法向量：  M=M1 x M2 （） </span></span><br><span class="line"><span class="comment">平面方程：    M.i(x-P1.x)+M.j(y-P1.y)+M.k(z-P1.z)=0 </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">前置条件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">2.</span> <span class="toc-text">目录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E7%82%B9%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.1.</span> <span class="toc-text">一.点的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B9%B3%E9%9D%A2%E4%B8%8A%E4%B8%A4%E7%82%B9%E4%B9%8B%E9%97%B4%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.平面上两点之间距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A4%E6%96%AD%E4%B8%A4%E7%82%B9%E6%98%AF%E5%90%A6%E9%87%8D%E5%90%88"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.判断两点是否重合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%9F%A2%E9%87%8F%E5%8F%89%E4%B9%98"><span class="toc-number">2.1.3.</span> <span class="toc-text">3.矢量叉乘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%9F%A2%E9%87%8F%E7%82%B9%E4%B9%98"><span class="toc-number">2.1.4.</span> <span class="toc-text">4.矢量点乘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%A4%E6%96%AD%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E7%BA%BF%E6%AE%B5%E4%B8%8A"><span class="toc-number">2.1.5.</span> <span class="toc-text">5.判断点是否在线段上</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%B1%82%E4%B8%80%E7%82%B9%E9%A5%B6%E6%9F%90%E7%82%B9%E6%97%8B%E8%BD%AC%E5%90%8E%E7%9A%84%E5%9D%90%E6%A0%87"><span class="toc-number">2.1.6.</span> <span class="toc-text">6.求一点饶某点旋转后的坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%B1%82%E7%9F%A2%E9%87%8F%E5%A4%B9%E8%A7%92"><span class="toc-number">2.1.7.</span> <span class="toc-text">7.求矢量夹角</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E7%BA%BF%E6%AE%B5%E5%8F%8A%E7%9B%B4%E7%BA%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.2.</span> <span class="toc-text">二.线段及直线的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%82%B9%E4%B8%8E%E7%BA%BF%E6%AE%B5%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.2.1.</span> <span class="toc-text">1.点与线段的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B1%82%E7%82%B9%E5%88%B0%E7%BA%BF%E6%AE%B5%E6%89%80%E5%9C%A8%E7%9B%B4%E7%BA%BF%E5%9E%82%E7%BA%BF%E7%9A%84%E5%9E%82%E8%B6%B3"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.求点到线段所在直线垂线的垂足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%82%B9%E5%88%B0%E7%BA%BF%E6%AE%B5%E7%9A%84%E6%9C%80%E8%BF%91%E7%82%B9"><span class="toc-number">2.2.3.</span> <span class="toc-text">3.点到线段的最近点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%82%B9%E5%88%B0%E7%BA%BF%E6%AE%B5%E6%89%80%E5%9C%A8%E7%9B%B4%E7%BA%BF%E7%9A%84%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.2.4.</span> <span class="toc-text">4.点到线段所在直线的距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%82%B9%E5%88%B0%E6%8A%98%E7%BA%BF%E9%9B%86%E7%9A%84%E6%9C%80%E8%BF%91%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.2.5.</span> <span class="toc-text">5.点到折线集的最近距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%A4%E6%96%AD%E5%9C%86%E6%98%AF%E5%90%A6%E5%9C%A8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.2.6.</span> <span class="toc-text">6.判断圆是否在多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%B1%82%E7%9F%A2%E9%87%8F%E5%A4%B9%E8%A7%92%E4%BD%99%E5%BC%A6"><span class="toc-number">2.2.7.</span> <span class="toc-text">7.求矢量夹角余弦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%B1%82%E7%BA%BF%E6%AE%B5%E4%B9%8B%E9%97%B4%E7%9A%84%E5%A4%B9%E8%A7%92"><span class="toc-number">2.2.8.</span> <span class="toc-text">8.求线段之间的夹角</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4"><span class="toc-number">2.2.9.</span> <span class="toc-text">9.判断线段是否相交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4%E4%BD%86%E4%B8%8D%E4%BA%A4%E5%9C%A8%E7%AB%AF%E7%82%B9%E5%A4%84"><span class="toc-number">2.2.10.</span> <span class="toc-text">10.判断线段是否相交但不交在端点处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E6%B1%82%E7%BA%BF%E6%AE%B5%E6%89%80%E5%9C%A8%E7%9B%B4%E7%BA%BF%E7%9A%84%E6%96%B9%E7%A8%8B"><span class="toc-number">2.2.11.</span> <span class="toc-text">11.求线段所在直线的方程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E6%B1%82%E7%9B%B4%E7%BA%BF%E7%9A%84%E6%96%9C%E7%8E%87"><span class="toc-number">2.2.12.</span> <span class="toc-text">12.求直线的斜率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E6%B1%82%E7%9B%B4%E7%BA%BF%E7%9A%84%E5%80%BE%E6%96%9C%E8%A7%92"><span class="toc-number">2.2.13.</span> <span class="toc-text">13.求直线的倾斜角</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%B1%82%E7%82%B9%E5%85%B3%E4%BA%8E%E6%9F%90%E7%9B%B4%E7%BA%BF%E7%9A%84%E5%AF%B9%E7%A7%B0%E7%82%B9"><span class="toc-number">2.2.14.</span> <span class="toc-text">14.求点关于某直线的对称点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E5%88%A4%E6%96%AD%E4%B8%A4%E6%9D%A1%E7%9B%B4%E7%BA%BF%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4%E5%8F%8A%E6%B1%82%E7%9B%B4%E7%BA%BF%E4%BA%A4%E7%82%B9"><span class="toc-number">2.2.15.</span> <span class="toc-text">15.判断两条直线是否相交及求直线交点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E7%9B%B8%E4%BA%A4%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%9B%B8%E4%BA%A4%E8%BF%94%E5%9B%9E%E4%BA%A4%E7%82%B9"><span class="toc-number">2.2.16.</span> <span class="toc-text">16.判断线段是否相交，如果相交返回交点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text">三.多边形常用算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E6%98%AF%E5%90%A6%E7%AE%80%E5%8D%95%E5%A4%9A%E8%BE%B9%E5%BD%A2"><span class="toc-number">2.3.1.</span> <span class="toc-text">1.判断多边形是否简单多边形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A3%80%E6%9F%A5%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%A1%B6%E7%82%B9%E7%9A%84%E5%87%B8%E5%87%B9%E6%80%A7"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.检查多边形顶点的凸凹性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E6%98%AF%E5%90%A6%E5%87%B8%E5%A4%9A%E8%BE%B9%E5%BD%A2"><span class="toc-number">2.3.3.</span> <span class="toc-text">3.判断多边形是否凸多边形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B1%82%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%9D%A2%E7%A7%AF"><span class="toc-number">2.3.4.</span> <span class="toc-text">4.求多边形面积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%A1%B6%E7%82%B9%E7%9A%84%E6%8E%92%E5%88%97%E6%96%B9%E5%90%91%EF%BC%8C%E6%96%B9%E6%B3%95%E4%B8%80"><span class="toc-number">2.3.5.</span> <span class="toc-text">5.判断多边形顶点的排列方向，方法一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E9%A1%B6%E7%82%B9%E7%9A%84%E6%8E%92%E5%88%97%E6%96%B9%E5%90%91%EF%BC%8C%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="toc-number">2.3.6.</span> <span class="toc-text">6.判断多边形顶点的排列方向，方法二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%B0%84%E7%BA%BF%E6%B3%95%E5%88%A4%E6%96%AD%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.3.7.</span> <span class="toc-text">7.射线法判断点是否在多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%88%A4%E6%96%AD%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E5%87%B8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.3.8.</span> <span class="toc-text">8.判断点是否在凸多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%AF%BB%E6%89%BE%E7%82%B9%E9%9B%86%E7%9A%84graham%E7%AE%97%E6%B3%95"><span class="toc-number">2.3.9.</span> <span class="toc-text">9.寻找点集的graham算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%AF%BB%E6%89%BE%E7%82%B9%E9%9B%86%E5%87%B8%E5%8C%85%E7%9A%84%E5%8D%B7%E5%8C%85%E8%A3%B9%E6%B3%95"><span class="toc-number">2.3.10.</span> <span class="toc-text">10.寻找点集凸包的卷包裹法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%88%A4%E6%96%AD%E7%BA%BF%E6%AE%B5%E6%98%AF%E5%90%A6%E5%9C%A8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85"><span class="toc-number">2.3.11.</span> <span class="toc-text">11.判断线段是否在多边形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E6%B1%82%E7%AE%80%E5%8D%95%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E9%87%8D%E5%BF%83"><span class="toc-number">2.3.12.</span> <span class="toc-text">12.求简单多边形的重心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E6%B1%82%E5%87%B8%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E9%87%8D%E5%BF%83"><span class="toc-number">2.3.13.</span> <span class="toc-text">13.求凸多边形的重心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E6%B1%82%E8%82%AF%E5%AE%9A%E5%9C%A8%E7%BB%99%E5%AE%9A%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%86%85%E7%9A%84%E4%B8%80%E4%B8%AA%E7%82%B9"><span class="toc-number">2.3.14.</span> <span class="toc-text">14.求肯定在给定多边形内的一个点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E6%B1%82%E4%BB%8E%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%A4%96%E4%B8%80%E7%82%B9%E5%87%BA%E5%8F%91%E5%88%B0%E8%AF%A5%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E5%88%87%E7%BA%BF"><span class="toc-number">2.3.15.</span> <span class="toc-text">15.求从多边形外一点出发到该多边形的切线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E5%88%A4%E6%96%AD%E5%A4%9A%E8%BE%B9%E5%BD%A2%E7%9A%84%E6%A0%B8%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">2.3.16.</span> <span class="toc-text">16.判断多边形的核是否存在</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E5%9C%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.4.</span> <span class="toc-text">四.圆的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E5%9C%86%E5%86%85"><span class="toc-number">2.4.1.</span> <span class="toc-text">1.点是否在圆内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%B1%82%E4%B8%8D%E5%85%B1%E7%BA%BF%E7%9A%84%E4%B8%89%E7%82%B9%E6%89%80%E7%A1%AE%E5%AE%9A%E7%9A%84%E5%9C%86"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.求不共线的三点所确定的圆</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A9%E5%BD%A2%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-number">2.5.</span> <span class="toc-text">矩形的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B7%B2%E7%9F%A5%E7%9F%A9%E5%BD%A2%E4%B8%89%E7%82%B9%E5%9D%90%E6%A0%87%EF%BC%8C%E6%B1%82%E7%AC%AC4%E7%82%B9%E5%9D%90%E6%A0%87"><span class="toc-number">2.5.1.</span> <span class="toc-text">1.已知矩形三点坐标，求第4点坐标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.6.</span> <span class="toc-text">五.常用算法的描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E8%A1%A5%E5%85%85"><span class="toc-number">2.7.</span> <span class="toc-text">六.补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%A4%E5%9C%86%E5%85%B3%E7%B3%BB"><span class="toc-number">2.7.1.</span> <span class="toc-text">1.两圆关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A4%E6%96%AD%E5%9C%86%E6%98%AF%E5%90%A6%E5%9C%A8%E7%9F%A9%E5%BD%A2%E5%86%85"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.判断圆是否在矩形内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%82%B9%E5%88%B0%E5%B9%B3%E9%9D%A2%E7%9A%84%E8%B7%9D%E7%A6%BB"><span class="toc-number">2.7.3.</span> <span class="toc-text">3.点到平面的距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E7%9B%B4%E7%BA%BF%E5%90%8C%E4%BE%A7"><span class="toc-number">2.7.4.</span> <span class="toc-text">4.点是否在直线同侧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%95%9C%E9%9D%A2%E5%8F%8D%E5%B0%84%E7%BA%BF"><span class="toc-number">2.7.5.</span> <span class="toc-text">5.镜面反射线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%9F%A9%E5%BD%A2%E5%8C%85%E5%90%AB"><span class="toc-number">2.7.6.</span> <span class="toc-text">6.矩形包含</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%B8%A4%E5%9C%86%E4%BA%A4%E7%82%B9"><span class="toc-number">2.7.7.</span> <span class="toc-text">7.两圆交点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%B8%A4%E5%9C%86%E5%85%AC%E5%85%B1%E9%9D%A2%E7%A7%AF"><span class="toc-number">2.7.8.</span> <span class="toc-text">8.两圆公共面积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%9C%86%E5%92%8C%E7%9B%B4%E7%BA%BF%E5%85%B3%E7%B3%BB"><span class="toc-number">2.7.9.</span> <span class="toc-text">9.圆和直线关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%86%85%E5%88%87%E5%9C%86"><span class="toc-number">2.7.10.</span> <span class="toc-text">10.内切圆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E6%B1%82%E5%88%87%E7%82%B9"><span class="toc-number">2.7.11.</span> <span class="toc-text">11.求切点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E7%BA%BF%E6%AE%B5%E7%9A%84%E5%B7%A6%E5%8F%B3%E6%97%8B"><span class="toc-number">2.7.12.</span> <span class="toc-text">12.线段的左右旋</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E5%85%AC%E5%BC%8F"><span class="toc-number">2.7.13.</span> <span class="toc-text">13.公式</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&text=C++几何算法大全"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&is_video=false&description=C++几何算法大全"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=C++几何算法大全&body=Check out this article: http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&title=C++几何算法大全"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&name=C++几何算法大全&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://radicas.github.io/2022/05/23/C-%E5%87%A0%E4%BD%95%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8/&t=C++几何算法大全"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
      
        
          2021-2022
            Radica
  </div>
  <div class="footer-right">
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <span id="jinrishici-sentence">正在加载今日诗词....</span>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
  </div>
</footer>
    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
